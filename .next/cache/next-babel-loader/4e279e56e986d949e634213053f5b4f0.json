{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityQuestions.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityQuestion from \"./CommunityQuestion\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\nvar CommunityQuestions = function CommunityQuestions(_ref) {\n  _s();\n\n  var community = _ref.community;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var fetchPosts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(host, \"/communities/\").concat(community, \"/posts?page=\").concat(page, \"&limit=10\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchPosts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useQuery = useQuery([\"community-posts\", page], function () {\n    return fetchPosts(page);\n  }, {\n    keepPreviousData: true,\n    cacheTime: 0\n  }),\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      isPreviousData = _useQuery.isPreviousData;\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, _this) : isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.sort(function (a, b) {\n              var dateA = Date.parse(a.createdAt);\n              var dateB = Date.parse(b.createdAt);\n              return dateB > dateA ? 1 : -1;\n            }).map(function (post) {\n              return /*#__PURE__*/_jsxDEV(CommunityQuestion, {\n                post: post,\n                community: community\n              }, post.uuid, false, {\n                fileName: _jsxFileName,\n                lineNumber: 55,\n                columnNumber: 21\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"page-handlers\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"current-page\",\n              children: [\"Current Page: \", page]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                return setPage(function (old) {\n                  return Math.max(old - 1, 0);\n                });\n              },\n              disabled: page === 1,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Previous Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                if (!isPreviousData && data.hasMore) {\n                  setPage(function (old) {\n                    return old + 1;\n                  });\n                }\n              },\n              disabled: isPreviousData || !data.hasMore,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Next Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Aside, {\n        borderSide: \"left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3461175424\",\n      dynamic: [css.headerBackground],\n      children: \".community-post-header-container.__jsx-style-dynamic-selector{height:140px;width:100%;background:\".concat(css.headerBackground, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;margin:10px 0;}.community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}.posts-container.__jsx-style-dynamic-selector{width:80%;}.community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.page-handlers.__jsx-style-dynamic-selector{width:90%;margin:30px auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;}button.__jsx-style-dynamic-selector{height:70%;width:90px;margin:0 5px;font-size:0.6rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9Db21tdW5pdHlRdWVzdGlvbnMudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXNGa0IsQUFHd0IsQUFXSCxBQUtHLEFBS0gsQUFJQyxBQU9ELEFBU0MsVUE3QkcsQUFVaEIsQUFXbUIsQ0FQSixBQWdCRixFQXpDQSxTQTBDRSxFQXpDMkIsQUFXMUMsR0FxQmUsUUFVSSxpQkFDbkIsWUExQ2UsVUFjRixXQUNiLEFBU3dCLGdCQVFHLHFDQS9CSCx5QkF3QkgsbUNBUUEsa0JBL0JJLHdDQXdCekIsbUNBUWMsWUFDZCxZQWhDcUIsNkZBQ3JCIiwiZmlsZSI6Ii9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9Db21tdW5pdHlRdWVzdGlvbnMudHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyB1c2VRdWVyeSB9IGZyb20gXCJyZWFjdC1xdWVyeVwiO1xuXG5pbXBvcnQgaG9zdCBmcm9tIFwiLi4vdXRpbHMvaG9zdFwiO1xuaW1wb3J0IHsgQ29tbXVuaXR5UG9zdHNUeXBlIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL3Bvc3RUeXBlXCI7XG5pbXBvcnQgQ29tbXVuaXR5UXVlc3Rpb24gZnJvbSBcIi4vQ29tbXVuaXR5UXVlc3Rpb25cIjtcbmltcG9ydCBBc2lkZSBmcm9tIFwiLi9Bc2lkZVwiO1xuaW1wb3J0ICogYXMgY3NzIGZyb20gXCIuLi91dGlscy9jc3NWYXJpYWJsZXNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY29tbXVuaXR5OiBzdHJpbmc7XG59XG5cbmNvbnN0IENvbW11bml0eVF1ZXN0aW9uczogUmVhY3QuRkM8UHJvcHM+ID0gKHsgY29tbXVuaXR5IH0pID0+IHtcbiAgY29uc3QgW3BhZ2UsIHNldFBhZ2VdID0gdXNlU3RhdGU8bnVtYmVyPigxKTtcblxuICBjb25zdCBmZXRjaFBvc3RzID0gYXN5bmMgKHBhZ2U6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKFxuICAgICAgYCR7aG9zdH0vY29tbXVuaXRpZXMvJHtjb21tdW5pdHl9L3Bvc3RzP3BhZ2U9JHtwYWdlfSZsaW1pdD0xMGBcbiAgICApO1xuICAgIGNvbnN0IGRhdGE6IENvbW11bml0eVBvc3RzVHlwZSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgY29uc3QgeyBpc0xvYWRpbmcsIGlzRXJyb3IsIGVycm9yLCBkYXRhLCBpc1ByZXZpb3VzRGF0YSB9ID0gdXNlUXVlcnk8XG4gICAgQ29tbXVuaXR5UG9zdHNUeXBlLFxuICAgIEVycm9yXG4gID4oW1wiY29tbXVuaXR5LXBvc3RzXCIsIHBhZ2VdLCAoKSA9PiBmZXRjaFBvc3RzKHBhZ2UpLCB7XG4gICAga2VlcFByZXZpb3VzRGF0YTogdHJ1ZSxcbiAgICBjYWNoZVRpbWU6IDAsXG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tdW5pdHktcG9zdC1oZWFkZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJoZWFkZXItdGl0bGVcIj57ZGF0YT8uY29tbXVuaXR5Lm5hbWV9PC9oMT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiaGVhZGVyLWRlc2NyaXB0aW9uXCI+e2RhdGE/LmNvbW11bml0eS5kZXNjcmlwdGlvbn08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbXVuaXR5LXBvc3QtcGFnZS1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3N0cy1jb250YWluZXJcIj5cbiAgICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgPGRpdj5Mb2FkaW5nLi4uPC9kaXY+XG4gICAgICAgICAgKSA6IGlzRXJyb3IgPyAoXG4gICAgICAgICAgICA8ZGl2PntlcnJvci5tZXNzYWdlfTwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbXVuaXR5LXBvc3RzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIHtkYXRhLnBvc3RzXG4gICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQSA9IERhdGUucGFyc2UoYS5jcmVhdGVkQXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQiA9IERhdGUucGFyc2UoYi5jcmVhdGVkQXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUIgPiBkYXRlQSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAubWFwKChwb3N0KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxDb21tdW5pdHlRdWVzdGlvblxuICAgICAgICAgICAgICAgICAgICAgIHBvc3Q9e3Bvc3R9XG4gICAgICAgICAgICAgICAgICAgICAgY29tbXVuaXR5PXtjb21tdW5pdHl9XG4gICAgICAgICAgICAgICAgICAgICAga2V5PXtwb3N0LnV1aWR9XG4gICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS1oYW5kbGVyc1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImN1cnJlbnQtcGFnZVwiPkN1cnJlbnQgUGFnZToge3BhZ2V9PC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFBhZ2UoKG9sZCkgPT4gTWF0aC5tYXgob2xkIC0gMSwgMCkpfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3BhZ2UgPT09IDF9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgUHJldmlvdXMgUGFnZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1ByZXZpb3VzRGF0YSAmJiBkYXRhLmhhc01vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQYWdlKChvbGQpID0+IG9sZCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUHJldmlvdXNEYXRhIHx8ICFkYXRhLmhhc01vcmV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgTmV4dCBQYWdlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEFzaWRlIGJvcmRlclNpZGU9e1wibGVmdFwifSAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbW11bml0eS1wb3N0LWhlYWRlci1jb250YWluZXIge1xuICAgICAgICAgIGhlaWdodDogMTQwcHg7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHtjc3MuaGVhZGVyQmFja2dyb3VuZH07XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyLXRpdGxlLFxuICAgICAgICAuaGVhZGVyLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICB3aWR0aDogOTAlO1xuICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbW11bml0eS1wb3N0LXBhZ2UtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBvc3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb21tdW5pdHktcG9zdHMtY29udGFpbmVyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYWdlLWhhbmRsZXJzIHtcbiAgICAgICAgICB3aWR0aDogOTAlO1xuICAgICAgICAgIG1hcmdpbjogMzBweCBhdXRvO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGhlaWdodDogMzBweDtcbiAgICAgICAgfVxuXG4gICAgICAgIGJ1dHRvbiB7XG4gICAgICAgICAgaGVpZ2h0OiA3MCU7XG4gICAgICAgICAgd2lkdGg6IDkwcHg7XG4gICAgICAgICAgbWFyZ2luOiAwIDVweDtcbiAgICAgICAgICBmb250LXNpemU6IDAuNnJlbTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21tdW5pdHlRdWVzdGlvbnM7XG4iXX0= */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityQuestions.tsx */\")\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CommunityQuestions, \"B8AHcuIhDtcfT64L9EclU84Jm5E=\", false, function () {\n  return [useQuery];\n});\n\n_c = CommunityQuestions;\nexport default CommunityQuestions;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommunityQuestions\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityQuestions.tsx"],"names":["React","useState","useQuery","host","CommunityQuestion","Aside","css","CommunityQuestions","community","page","setPage","fetchPosts","fetch","res","json","data","keepPreviousData","cacheTime","isLoading","isError","error","isPreviousData","headerBackground","name","description","message","posts","sort","a","b","dateA","Date","parse","createdAt","dateB","map","post","uuid","old","Math","max","hasMore"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\n\nimport host from \"../utils/host\";\nimport { CommunityPostsType } from \"../utils/types/postType\";\nimport CommunityQuestion from \"./CommunityQuestion\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\ninterface Props {\n  community: string;\n}\n\nconst CommunityQuestions: React.FC<Props> = ({ community }) => {\n  const [page, setPage] = useState<number>(1);\n\n  const fetchPosts = async (page: number) => {\n    const res = await fetch(\n      `${host}/communities/${community}/posts?page=${page}&limit=10`\n    );\n    const data: CommunityPostsType = await res.json();\n    return data;\n  };\n\n  const { isLoading, isError, error, data, isPreviousData } = useQuery<\n    CommunityPostsType,\n    Error\n  >([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0,\n  });\n\n  return (\n    <React.Fragment>\n      <div className=\"community-post-header-container\">\n        <h1 className=\"header-title\">{data?.community.name}</h1>\n        <p className=\"header-description\">{data?.community.description}</p>\n      </div>\n      <div className=\"community-post-page-container\">\n        <div className=\"posts-container\">\n          {isLoading ? (\n            <div>Loading...</div>\n          ) : isError ? (\n            <div>{error.message}</div>\n          ) : (\n            <React.Fragment>\n              <div className=\"community-posts-container\">\n                {data.posts\n                  .sort((a, b) => {\n                    const dateA = Date.parse(a.createdAt);\n                    const dateB = Date.parse(b.createdAt);\n                    return dateB > dateA ? 1 : -1;\n                  })\n                  .map((post) => (\n                    <CommunityQuestion\n                      post={post}\n                      community={community}\n                      key={post.uuid}\n                    />\n                  ))}\n              </div>\n              <div className=\"page-handlers\">\n                <p className=\"current-page\">Current Page: {page}</p>\n                <button\n                  onClick={() => setPage((old) => Math.max(old - 1, 0))}\n                  disabled={page === 1}\n                >\n                  Previous Page\n                </button>\n                <button\n                  onClick={() => {\n                    if (!isPreviousData && data.hasMore) {\n                      setPage((old) => old + 1);\n                    }\n                  }}\n                  disabled={isPreviousData || !data.hasMore}\n                >\n                  Next Page\n                </button>\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n        <Aside borderSide={\"left\"} />\n      </div>\n\n      <style jsx>{`\n        .community-post-header-container {\n          height: 140px;\n          width: 100%;\n          background: ${css.headerBackground};\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .header-title,\n        .header-description {\n          width: 90%;\n          margin: 10px 0;\n        }\n\n        .community-post-page-container {\n          display: flex;\n          width: 100%;\n        }\n\n        .posts-container {\n          width: 80%;\n        }\n\n        .community-posts-container {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .page-handlers {\n          width: 90%;\n          margin: 30px auto;\n          display: flex;\n          justify-content: flex-end;\n          align-items: center;\n          height: 30px;\n        }\n\n        button {\n          height: 70%;\n          width: 90px;\n          margin: 0 5px;\n          font-size: 0.6rem;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default CommunityQuestions;\n"]},"metadata":{},"sourceType":"module"}
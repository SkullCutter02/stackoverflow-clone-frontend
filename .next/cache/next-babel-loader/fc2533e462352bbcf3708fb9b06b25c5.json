{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityPost from \"./CommunityPost\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\nvar CommunityPosts = function CommunityPosts(_ref) {\n  _s();\n\n  var community = _ref.community;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var fetchPosts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(host, \"/communities/\").concat(community, \"/posts?page=\").concat(page, \"&limit=10\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchPosts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useQuery = useQuery([\"community-posts\", page], function () {\n    return fetchPosts(page);\n  }, {\n    keepPreviousData: true,\n    cacheTime: 0\n  }),\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      isPreviousData = _useQuery.isPreviousData;\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, _this) : isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]),\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.map(function (post) {\n              return /*#__PURE__*/_jsxDEV(CommunityPost, {\n                post: post\n              }, post.uuid, false, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 19\n              }, _this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"page-handlers\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]) + \" \" + \"current-page\",\n              children: [\"Current Page: \", page]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                return setPage(function (old) {\n                  return Math.max(old - 1, 0);\n                });\n              },\n              disabled: page === 1,\n              className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]),\n              children: \"Previous Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                if (!isPreviousData && data.hasMore) {\n                  setPage(function (old) {\n                    return old + 1;\n                  });\n                }\n              },\n              disabled: isPreviousData || !data.hasMore,\n              className: _JSXStyle.dynamic([[\"3958885311\", [css.headerBackground]]]),\n              children: \"Next Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Aside, {\n        borderSide: \"left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3958885311\",\n      dynamic: [css.headerBackground],\n      children: \".community-post-header-container.__jsx-style-dynamic-selector{height:140px;width:100%;background:\".concat(css.headerBackground, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;margin:10px 0;}.community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}.posts-container.__jsx-style-dynamic-selector{width:80%;}.community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.page-handlers.__jsx-style-dynamic-selector{border:1px solid red;width:80%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9Db21tdW5pdHlQb3N0cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBNEVrQixBQUd3QixBQVdILEFBS0csQUFLSCxBQUlDLEFBT1UsVUFwQlAsQUFVaEIsQ0FJZSxFQXpCRixRQWdDRCxHQS9COEIsQUFXMUMsT0FxQkEsaUNBL0JlLFVBY0YsV0FDYixBQVN3QixxREF2QkEseUJBd0JILHFEQXZCSSx3Q0F3QnpCLDJEQXZCcUIsNkZBQ3JCIiwiZmlsZSI6Ii9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9Db21tdW5pdHlQb3N0cy50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVF1ZXJ5IH0gZnJvbSBcInJlYWN0LXF1ZXJ5XCI7XG5cbmltcG9ydCBob3N0IGZyb20gXCIuLi91dGlscy9ob3N0XCI7XG5pbXBvcnQgeyBDb21tdW5pdHlQb3N0c1R5cGUgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvcG9zdFR5cGVcIjtcbmltcG9ydCBDb21tdW5pdHlQb3N0IGZyb20gXCIuL0NvbW11bml0eVBvc3RcIjtcbmltcG9ydCBBc2lkZSBmcm9tIFwiLi9Bc2lkZVwiO1xuaW1wb3J0ICogYXMgY3NzIGZyb20gXCIuLi91dGlscy9jc3NWYXJpYWJsZXNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY29tbXVuaXR5OiBzdHJpbmc7XG59XG5cbmNvbnN0IENvbW11bml0eVBvc3RzOiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBjb21tdW5pdHkgfSkgPT4ge1xuICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDEpO1xuXG4gIGNvbnN0IGZldGNoUG9zdHMgPSBhc3luYyAocGFnZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgJHtob3N0fS9jb21tdW5pdGllcy8ke2NvbW11bml0eX0vcG9zdHM/cGFnZT0ke3BhZ2V9JmxpbWl0PTEwYFxuICAgICk7XG4gICAgY29uc3QgZGF0YTogQ29tbXVuaXR5UG9zdHNUeXBlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBjb25zdCB7IGlzTG9hZGluZywgaXNFcnJvciwgZXJyb3IsIGRhdGEsIGlzUHJldmlvdXNEYXRhIH0gPSB1c2VRdWVyeTxcbiAgICBDb21tdW5pdHlQb3N0c1R5cGUsXG4gICAgRXJyb3JcbiAgPihbXCJjb21tdW5pdHktcG9zdHNcIiwgcGFnZV0sICgpID0+IGZldGNoUG9zdHMocGFnZSksIHtcbiAgICBrZWVwUHJldmlvdXNEYXRhOiB0cnVlLFxuICAgIGNhY2hlVGltZTogMCxcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW11bml0eS1wb3N0LWhlYWRlci1jb250YWluZXJcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImhlYWRlci10aXRsZVwiPntkYXRhPy5jb21tdW5pdHkubmFtZX08L2gxPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJoZWFkZXItZGVzY3JpcHRpb25cIj57ZGF0YT8uY29tbXVuaXR5LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tdW5pdHktcG9zdC1wYWdlLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBvc3RzLWNvbnRhaW5lclwiPlxuICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8ZGl2PkxvYWRpbmcuLi48L2Rpdj5cbiAgICAgICAgICApIDogaXNFcnJvciA/IChcbiAgICAgICAgICAgIDxkaXY+e2Vycm9yLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tdW5pdHktcG9zdHMtY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAge2RhdGEucG9zdHMubWFwKChwb3N0KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8Q29tbXVuaXR5UG9zdCBwb3N0PXtwb3N0fSBrZXk9e3Bvc3QudXVpZH0gLz5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicGFnZS1oYW5kbGVyc1wiPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImN1cnJlbnQtcGFnZVwiPkN1cnJlbnQgUGFnZToge3BhZ2V9PC9wPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldFBhZ2UoKG9sZCkgPT4gTWF0aC5tYXgob2xkIC0gMSwgMCkpfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e3BhZ2UgPT09IDF9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgUHJldmlvdXMgUGFnZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1ByZXZpb3VzRGF0YSAmJiBkYXRhLmhhc01vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICBzZXRQYWdlKChvbGQpID0+IG9sZCArIDEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzUHJldmlvdXNEYXRhIHx8ICFkYXRhLmhhc01vcmV9XG4gICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgTmV4dCBQYWdlXG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICApfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEFzaWRlIGJvcmRlclNpZGU9e1wibGVmdFwifSAvPlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmNvbW11bml0eS1wb3N0LWhlYWRlci1jb250YWluZXIge1xuICAgICAgICAgIGhlaWdodDogMTQwcHg7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHtjc3MuaGVhZGVyQmFja2dyb3VuZH07XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAuaGVhZGVyLXRpdGxlLFxuICAgICAgICAuaGVhZGVyLWRlc2NyaXB0aW9uIHtcbiAgICAgICAgICB3aWR0aDogOTAlO1xuICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNvbW11bml0eS1wb3N0LXBhZ2UtY29udGFpbmVyIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG5cbiAgICAgICAgLnBvc3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb21tdW5pdHktcG9zdHMtY29udGFpbmVyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wYWdlLWhhbmRsZXJzIHtcbiAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCByZWQ7XG4gICAgICAgICAgd2lkdGg6IDgwJTtcbiAgICAgICAgfVxuICAgICAgYH08L3N0eWxlPlxuICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBDb21tdW5pdHlQb3N0cztcbiJdfQ== */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx */\")\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CommunityPosts, \"B8AHcuIhDtcfT64L9EclU84Jm5E=\", false, function () {\n  return [useQuery];\n});\n\n_c = CommunityPosts;\nexport default CommunityPosts;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommunityPosts\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx"],"names":["React","useState","useQuery","host","CommunityPost","Aside","css","CommunityPosts","community","page","setPage","fetchPosts","fetch","res","json","data","keepPreviousData","cacheTime","isLoading","isError","error","isPreviousData","headerBackground","name","description","message","posts","map","post","uuid","old","Math","max","hasMore"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\n\nimport host from \"../utils/host\";\nimport { CommunityPostsType } from \"../utils/types/postType\";\nimport CommunityPost from \"./CommunityPost\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\ninterface Props {\n  community: string;\n}\n\nconst CommunityPosts: React.FC<Props> = ({ community }) => {\n  const [page, setPage] = useState<number>(1);\n\n  const fetchPosts = async (page: number) => {\n    const res = await fetch(\n      `${host}/communities/${community}/posts?page=${page}&limit=10`\n    );\n    const data: CommunityPostsType = await res.json();\n    return data;\n  };\n\n  const { isLoading, isError, error, data, isPreviousData } = useQuery<\n    CommunityPostsType,\n    Error\n  >([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0,\n  });\n\n  return (\n    <React.Fragment>\n      <div className=\"community-post-header-container\">\n        <h1 className=\"header-title\">{data?.community.name}</h1>\n        <p className=\"header-description\">{data?.community.description}</p>\n      </div>\n      <div className=\"community-post-page-container\">\n        <div className=\"posts-container\">\n          {isLoading ? (\n            <div>Loading...</div>\n          ) : isError ? (\n            <div>{error.message}</div>\n          ) : (\n            <React.Fragment>\n              <div className=\"community-posts-container\">\n                {data.posts.map((post) => (\n                  <CommunityPost post={post} key={post.uuid} />\n                ))}\n              </div>\n              <div className=\"page-handlers\">\n                <p className=\"current-page\">Current Page: {page}</p>\n                <button\n                  onClick={() => setPage((old) => Math.max(old - 1, 0))}\n                  disabled={page === 1}\n                >\n                  Previous Page\n                </button>\n                <button\n                  onClick={() => {\n                    if (!isPreviousData && data.hasMore) {\n                      setPage((old) => old + 1);\n                    }\n                  }}\n                  disabled={isPreviousData || !data.hasMore}\n                >\n                  Next Page\n                </button>\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n        <Aside borderSide={\"left\"} />\n      </div>\n\n      <style jsx>{`\n        .community-post-header-container {\n          height: 140px;\n          width: 100%;\n          background: ${css.headerBackground};\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .header-title,\n        .header-description {\n          width: 90%;\n          margin: 10px 0;\n        }\n\n        .community-post-page-container {\n          display: flex;\n          width: 100%;\n        }\n\n        .posts-container {\n          width: 80%;\n        }\n\n        .community-posts-container {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .page-handlers {\n          border: 1px solid red;\n          width: 80%;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default CommunityPosts;\n"]},"metadata":{},"sourceType":"module"}
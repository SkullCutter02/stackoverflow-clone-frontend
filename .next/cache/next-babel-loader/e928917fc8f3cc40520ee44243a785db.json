{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortDown, faSortUp } from \"@fortawesome/free-solid-svg-icons\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { useRouter } from \"next/router\";\nimport * as css from \"../utils/cssVariables\";\nimport AskedBy from \"./AskedBy\";\nimport { UserContext } from \"../context/UserContext\";\nimport hljs from \"highlight.js\";\nimport host from \"../utils/host\";\nimport { updateVote, getCookie } from \"../utils/functions\";\n\nvar Answer = function Answer(_ref) {\n  _s();\n\n  var _userContext$user;\n\n  var comment = _ref.comment;\n\n  var _useState = useState(comment.votes),\n      votes = _useState[0],\n      setVotes = _useState[1];\n\n  var _useState2 = useState(\"grey\"),\n      upvoteColor = _useState2[0],\n      setUpvoteColor = _useState2[1];\n\n  var _useState3 = useState(\"grey\"),\n      downvoteColor = _useState3[0],\n      setDownvoteColor = _useState3[1];\n\n  var userContext = useContext(UserContext);\n  var router = useRouter();\n  var style = {\n    cursor: \"pointer\"\n  };\n  useEffect(function () {\n    var pres = document.querySelectorAll(\"pre\");\n\n    for (var i = 0; i < pres.length; i++) {\n      hljs.highlightBlock(pres[i]);\n    }\n  }, []);\n  useEffect(function () {\n    if (userContext.user) {\n      fetch(\"\".concat(host, \"/posts/comments/\").concat(comment.uuid, \"/vote/status\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.status) {\n          if (data.type === \"upvote\") {\n            setUpvoteColor(css.upvote);\n          } else if (data.type === \"downvote\") {\n            setDownvoteColor(css.downvote);\n          }\n        }\n      });\n    }\n  }, [userContext]);\n\n  var vote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(voteType) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!userContext.user) {\n                _context.next = 10;\n                break;\n              }\n\n              if (!(userContext.user.uuid !== comment.user.uuid)) {\n                _context.next = 7;\n                break;\n              }\n\n              fetch(\"\".concat(host, \"/posts/comments/\").concat(comment.uuid, \"/vote/status\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid\n                })\n              }).then(function (res) {\n                return res.json();\n              }).then(function (data) {\n                return updateVote(data, voteType, setVotes, setUpvoteColor, setDownvoteColor, votes, css.upvote, css.downvote);\n              });\n              _context.next = 5;\n              return fetch(\"\".concat(host, \"/posts/comments/\").concat(comment.uuid, \"/vote\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(getCookie(\"token\"))\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid,\n                  voteType: voteType\n                })\n              });\n\n            case 5:\n              _context.next = 8;\n              break;\n\n            case 7:\n              alert(\"You can't vote on your own comment!\");\n\n            case 8:\n              _context.next = 12;\n              break;\n\n            case 10:\n              _context.next = 12;\n              return router.push(\"/auth/signup\");\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function vote(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"answer-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"votes\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faSortUp,\n          color: upvoteColor,\n          style: style,\n          size: \"2x\",\n          onClick: function onClick() {\n            return vote(\"upvote\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"#c6c6c6\",\n            margin: \"-8px 0\"\n          },\n          className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"vote-count\",\n          children: votes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faSortDown,\n          color: downvoteColor,\n          style: style,\n          size: \"2x\",\n          onClick: function onClick() {\n            return vote(\"downvote\");\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"95%\"\n        },\n        className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]),\n        children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n          className: \"preview answer-pre\",\n          source: comment.body,\n          plugins: [remarkGfm]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"user\",\n          children: /*#__PURE__*/_jsxDEV(AskedBy, {\n            type: \"answered\",\n            username: comment.user.username,\n            createdAt: comment.createdAt,\n            postUuid: comment.user.uuid,\n            userUuid: userContext === null || userContext === void 0 ? void 0 : (_userContext$user = userContext.user) === null || _userContext$user === void 0 ? void 0 : _userContext$user.uuid,\n            reputation: comment.user.reputation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"1321083110\",\n      dynamic: [css.floatingPostBackground],\n      children: \".answer-container.__jsx-style-dynamic-selector{width:100%;margin-bottom:30px;padding:5px 5px 20px;border-radius:10px;background:\".concat(css.floatingPostBackground, \";position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.user.__jsx-style-dynamic-selector{position:absolute;bottom:10px;right:5px;}.votes.__jsx-style-dynamic-selector{width:5%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin-top:14px;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9BbnN3ZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXNKa0IsQUFHc0IsQUFVTyxBQU1ULFNBQ0ksRUFoQk0sT0FVUCxZQVRTLEFBVVgsVUFDWixXQVZxQixtQkFDcUIsYUFjbEIsMkJBYkosa0JBQ0wsaUNBYU0seUNBWnJCLG9EQWE2Qix5R0FDWCxnQkFDbEIiLCJmaWxlIjoiL1VzZXJzL3NrdWxsY3V0dGVyL1dlYlN0b3JtUHJvamVjdHMvc3RhY2tvdmVyZmxvdy1jbG9uZS9mcm9udGVuZC9jb21wb25lbnRzL0Fuc3dlci50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRm9udEF3ZXNvbWVJY29uIH0gZnJvbSBcIkBmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZVwiO1xuaW1wb3J0IHsgZmFTb3J0RG93biwgZmFTb3J0VXAgfSBmcm9tIFwiQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zXCI7XG5pbXBvcnQgUmVhY3RNYXJrZG93biBmcm9tIFwicmVhY3QtbWFya2Rvd25cIjtcbmltcG9ydCByZW1hcmtHZm0gZnJvbSBcInJlbWFyay1nZm1cIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuXG5pbXBvcnQgeyBDb21tZW50VHlwZSB9IGZyb20gXCIuLi91dGlscy90eXBlcy9pbmRpdmlkdWFsUXVlc3Rpb25UeXBlXCI7XG5pbXBvcnQgeyBWb3RlVHlwZSB9IGZyb20gXCIuLi91dGlscy90eXBlcy92b3RlVHlwZVwiO1xuaW1wb3J0ICogYXMgY3NzIGZyb20gXCIuLi91dGlscy9jc3NWYXJpYWJsZXNcIjtcbmltcG9ydCBBc2tlZEJ5IGZyb20gXCIuL0Fza2VkQnlcIjtcbmltcG9ydCB7IFVzZXJDb250ZXh0IH0gZnJvbSBcIi4uL2NvbnRleHQvVXNlckNvbnRleHRcIjtcbmltcG9ydCBobGpzIGZyb20gXCJoaWdobGlnaHQuanNcIjtcbmltcG9ydCBob3N0IGZyb20gXCIuLi91dGlscy9ob3N0XCI7XG5pbXBvcnQgeyB1cGRhdGVWb3RlLCBnZXRDb29raWUgfSBmcm9tIFwiLi4vdXRpbHMvZnVuY3Rpb25zXCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNvbW1lbnQ6IENvbW1lbnRUeXBlO1xufVxuXG5jb25zdCBBbnN3ZXI6IFJlYWN0LkZDPFByb3BzPiA9ICh7IGNvbW1lbnQgfSkgPT4ge1xuICBjb25zdCBbdm90ZXMsIHNldFZvdGVzXSA9IHVzZVN0YXRlPG51bWJlcj4oY29tbWVudC52b3Rlcyk7XG4gIGNvbnN0IFt1cHZvdGVDb2xvciwgc2V0VXB2b3RlQ29sb3JdID0gdXNlU3RhdGU8c3RyaW5nPihcImdyZXlcIik7XG4gIGNvbnN0IFtkb3dudm90ZUNvbG9yLCBzZXREb3dudm90ZUNvbG9yXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJncmV5XCIpO1xuXG4gIGNvbnN0IHVzZXJDb250ZXh0ID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IHN0eWxlID0geyBjdXJzb3I6IFwicG9pbnRlclwiIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBwcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInByZVwiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaGxqcy5oaWdobGlnaHRCbG9jayhwcmVzW2ldKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyQ29udGV4dC51c2VyKSB7XG4gICAgICBmZXRjaChgJHtob3N0fS9wb3N0cy9jb21tZW50cy8ke2NvbW1lbnQudXVpZH0vdm90ZS9zdGF0dXNgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJVdWlkOiB1c2VyQ29udGV4dC51c2VyLnV1aWQsXG4gICAgICAgIH0pLFxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKGRhdGE6IFZvdGVUeXBlKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcInVwdm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFVwdm90ZUNvbG9yKGNzcy51cHZvdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiZG93bnZvdGVcIikge1xuICAgICAgICAgICAgICBzZXREb3dudm90ZUNvbG9yKGNzcy5kb3dudm90ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFt1c2VyQ29udGV4dF0pO1xuXG4gIGNvbnN0IHZvdGUgPSBhc3luYyAodm90ZVR5cGU6IFwidXB2b3RlXCIgfCBcImRvd252b3RlXCIpID0+IHtcbiAgICBpZiAodXNlckNvbnRleHQudXNlcikge1xuICAgICAgaWYgKHVzZXJDb250ZXh0LnVzZXIudXVpZCAhPT0gY29tbWVudC51c2VyLnV1aWQpIHtcbiAgICAgICAgZmV0Y2goYCR7aG9zdH0vcG9zdHMvY29tbWVudHMvJHtjb21tZW50LnV1aWR9L3ZvdGUvc3RhdHVzYCwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB1c2VyVXVpZDogdXNlckNvbnRleHQudXNlci51dWlkLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHJlcy5qc29uKCkpXG4gICAgICAgICAgLnRoZW4oKGRhdGE6IFZvdGVUeXBlKSA9PlxuICAgICAgICAgICAgdXBkYXRlVm90ZShcbiAgICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgICAgdm90ZVR5cGUsXG4gICAgICAgICAgICAgIHNldFZvdGVzLFxuICAgICAgICAgICAgICBzZXRVcHZvdGVDb2xvcixcbiAgICAgICAgICAgICAgc2V0RG93bnZvdGVDb2xvcixcbiAgICAgICAgICAgICAgdm90ZXMsXG4gICAgICAgICAgICAgIGNzcy51cHZvdGUsXG4gICAgICAgICAgICAgIGNzcy5kb3dudm90ZVxuICAgICAgICAgICAgKVxuICAgICAgICAgICk7XG4gICAgICAgIGF3YWl0IGZldGNoKGAke2hvc3R9L3Bvc3RzL2NvbW1lbnRzLyR7Y29tbWVudC51dWlkfS92b3RlYCwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Z2V0Q29va2llKFwidG9rZW5cIil9YCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHVzZXJVdWlkOiB1c2VyQ29udGV4dC51c2VyLnV1aWQsXG4gICAgICAgICAgICB2b3RlVHlwZTogdm90ZVR5cGUsXG4gICAgICAgICAgfSksXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxlcnQoXCJZb3UgY2FuJ3Qgdm90ZSBvbiB5b3VyIG93biBjb21tZW50IVwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgcm91dGVyLnB1c2goXCIvYXV0aC9zaWdudXBcIik7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbnN3ZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidm90ZXNcIj5cbiAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uXG4gICAgICAgICAgICBpY29uPXtmYVNvcnRVcH1cbiAgICAgICAgICAgIGNvbG9yPXt1cHZvdGVDb2xvcn1cbiAgICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICAgIHNpemU9e1wiMnhcIn1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZvdGUoXCJ1cHZvdGVcIil9XG4gICAgICAgICAgLz5cbiAgICAgICAgICA8cFxuICAgICAgICAgICAgY2xhc3NOYW1lPVwidm90ZS1jb3VudFwiXG4gICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogXCIjYzZjNmM2XCIsIG1hcmdpbjogXCItOHB4IDBcIiB9fVxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt2b3Rlc31cbiAgICAgICAgICA8L3A+XG4gICAgICAgICAgPEZvbnRBd2Vzb21lSWNvblxuICAgICAgICAgICAgaWNvbj17ZmFTb3J0RG93bn1cbiAgICAgICAgICAgIGNvbG9yPXtkb3dudm90ZUNvbG9yfVxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgc2l6ZT17XCIyeFwifVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdm90ZShcImRvd252b3RlXCIpfVxuICAgICAgICAgIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IHN0eWxlPXt7IHdpZHRoOiBcIjk1JVwiIH19PlxuICAgICAgICAgIDxSZWFjdE1hcmtkb3duXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJwcmV2aWV3IGFuc3dlci1wcmVcIlxuICAgICAgICAgICAgc291cmNlPXtjb21tZW50LmJvZHl9XG4gICAgICAgICAgICBwbHVnaW5zPXtbcmVtYXJrR2ZtXX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlclwiPlxuICAgICAgICAgICAgPEFza2VkQnlcbiAgICAgICAgICAgICAgdHlwZT17XCJhbnN3ZXJlZFwifVxuICAgICAgICAgICAgICB1c2VybmFtZT17Y29tbWVudC51c2VyLnVzZXJuYW1lfVxuICAgICAgICAgICAgICBjcmVhdGVkQXQ9e2NvbW1lbnQuY3JlYXRlZEF0fVxuICAgICAgICAgICAgICBwb3N0VXVpZD17Y29tbWVudC51c2VyLnV1aWR9XG4gICAgICAgICAgICAgIHVzZXJVdWlkPXt1c2VyQ29udGV4dD8udXNlcj8udXVpZH1cbiAgICAgICAgICAgICAgcmVwdXRhdGlvbj17Y29tbWVudC51c2VyLnJlcHV0YXRpb259XG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5hbnN3ZXItY29udGFpbmVyIHtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAzMHB4O1xuICAgICAgICAgIHBhZGRpbmc6IDVweCA1cHggMjBweDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y3NzLmZsb2F0aW5nUG9zdEJhY2tncm91bmR9O1xuICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnVzZXIge1xuICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICBib3R0b206IDEwcHg7XG4gICAgICAgICAgcmlnaHQ6IDVweDtcbiAgICAgICAgfVxuXG4gICAgICAgIC52b3RlcyB7XG4gICAgICAgICAgd2lkdGg6IDUlO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAxNHB4O1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFuc3dlcjtcbiJdfQ== */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx */\")\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Answer, \"RV0q2OCHdtH/22AsmnvVUEbhveI=\", false, function () {\n  return [useRouter];\n});\n\n_c = Answer;\nexport default Answer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Answer\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx"],"names":["React","useEffect","useState","useContext","FontAwesomeIcon","faSortDown","faSortUp","ReactMarkdown","remarkGfm","useRouter","css","AskedBy","UserContext","hljs","host","updateVote","getCookie","Answer","comment","votes","setVotes","upvoteColor","setUpvoteColor","downvoteColor","setDownvoteColor","userContext","router","style","cursor","pres","document","querySelectorAll","i","length","highlightBlock","user","fetch","uuid","method","headers","body","JSON","stringify","userUuid","then","res","json","data","status","type","upvote","downvote","vote","voteType","Authorization","alert","push","floatingPostBackground","color","margin","width","username","createdAt","reputation"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortDown, faSortUp } from \"@fortawesome/free-solid-svg-icons\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { useRouter } from \"next/router\";\n\nimport { CommentType } from \"../utils/types/individualQuestionType\";\nimport { VoteType } from \"../utils/types/voteType\";\nimport * as css from \"../utils/cssVariables\";\nimport AskedBy from \"./AskedBy\";\nimport { UserContext } from \"../context/UserContext\";\nimport hljs from \"highlight.js\";\nimport host from \"../utils/host\";\nimport { updateVote, getCookie } from \"../utils/functions\";\n\ninterface Props {\n  comment: CommentType;\n}\n\nconst Answer: React.FC<Props> = ({ comment }) => {\n  const [votes, setVotes] = useState<number>(comment.votes);\n  const [upvoteColor, setUpvoteColor] = useState<string>(\"grey\");\n  const [downvoteColor, setDownvoteColor] = useState<string>(\"grey\");\n\n  const userContext = useContext(UserContext);\n  const router = useRouter();\n\n  const style = { cursor: \"pointer\" };\n\n  useEffect(() => {\n    const pres = document.querySelectorAll(\"pre\");\n\n    for (let i = 0; i < pres.length; i++) {\n      hljs.highlightBlock(pres[i]);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (userContext.user) {\n      fetch(`${host}/posts/comments/${comment.uuid}/vote/status`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((data: VoteType) => {\n          if (data.status) {\n            if (data.type === \"upvote\") {\n              setUpvoteColor(css.upvote);\n            } else if (data.type === \"downvote\") {\n              setDownvoteColor(css.downvote);\n            }\n          }\n        });\n    }\n  }, [userContext]);\n\n  const vote = async (voteType: \"upvote\" | \"downvote\") => {\n    if (userContext.user) {\n      if (userContext.user.uuid !== comment.user.uuid) {\n        fetch(`${host}/posts/comments/${comment.uuid}/vote/status`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            userUuid: userContext.user.uuid,\n          }),\n        })\n          .then((res) => res.json())\n          .then((data: VoteType) =>\n            updateVote(\n              data,\n              voteType,\n              setVotes,\n              setUpvoteColor,\n              setDownvoteColor,\n              votes,\n              css.upvote,\n              css.downvote\n            )\n          );\n        await fetch(`${host}/posts/comments/${comment.uuid}/vote`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${getCookie(\"token\")}`,\n          },\n          body: JSON.stringify({\n            userUuid: userContext.user.uuid,\n            voteType: voteType,\n          }),\n        });\n      } else {\n        alert(\"You can't vote on your own comment!\");\n      }\n    } else {\n      await router.push(\"/auth/signup\");\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"answer-container\">\n        <div className=\"votes\">\n          <FontAwesomeIcon\n            icon={faSortUp}\n            color={upvoteColor}\n            style={style}\n            size={\"2x\"}\n            onClick={() => vote(\"upvote\")}\n          />\n          <p\n            className=\"vote-count\"\n            style={{ color: \"#c6c6c6\", margin: \"-8px 0\" }}\n          >\n            {votes}\n          </p>\n          <FontAwesomeIcon\n            icon={faSortDown}\n            color={downvoteColor}\n            style={style}\n            size={\"2x\"}\n            onClick={() => vote(\"downvote\")}\n          />\n        </div>\n        <div style={{ width: \"95%\" }}>\n          <ReactMarkdown\n            className=\"preview answer-pre\"\n            source={comment.body}\n            plugins={[remarkGfm]}\n          />\n          <div className=\"user\">\n            <AskedBy\n              type={\"answered\"}\n              username={comment.user.username}\n              createdAt={comment.createdAt}\n              postUuid={comment.user.uuid}\n              userUuid={userContext?.user?.uuid}\n              reputation={comment.user.reputation}\n            />\n          </div>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .answer-container {\n          width: 100%;\n          margin-bottom: 30px;\n          padding: 5px 5px 20px;\n          border-radius: 10px;\n          background: ${css.floatingPostBackground};\n          position: relative;\n          display: flex;\n        }\n\n        .user {\n          position: absolute;\n          bottom: 10px;\n          right: 5px;\n        }\n\n        .votes {\n          width: 5%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          margin-top: 14px;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default Answer;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport Community from \"./Community\";\n\nconst Communities = ({\n  filter\n}) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n\n  const fetchCommunities = async (page = 1, filter = \"\") => {\n    const res = await fetch(`${host}/communities?page=${page}&limit=10&filter=${filter}`);\n    const data = await res.json();\n    return data;\n  };\n\n  const {\n    isLoading,\n    isError,\n    error,\n    data,\n    isPreviousData\n  } = useQuery([\"communities\", page, filter], () => fetchCommunities(page, filter), {\n    keepPreviousData: true\n  });\n  useEffect(() => {\n    setPage(1);\n  }, [filter]);\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-1563327456\" + \" \" + \"communities-container\",\n      children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-1563327456\",\n        children: \"Loading...\"\n      }) : isError ? /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-1563327456\",\n        children: [\"Error: \", error.message]\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [data.communities.map(community => /*#__PURE__*/_jsx(Community, {\n          uuid: community.uuid,\n          name: community.name,\n          description: community.description,\n          count: community.posts.length\n        }, community.uuid)), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"jsx-1563327456\" + \" \" + \"page-handlers\",\n          children: [/*#__PURE__*/_jsxs(\"p\", {\n            className: \"jsx-1563327456\" + \" \" + \"current-page\",\n            children: [\"Current Page: \", page]\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => {\n              setPage(old => Math.max(old - 1, 0));\n              window.scrollTo(0, -500);\n            },\n            disabled: page === 1,\n            className: \"jsx-1563327456\",\n            children: \"Previous Page\"\n          }), /*#__PURE__*/_jsx(\"button\", {\n            onClick: () => {\n              if (!isPreviousData && data.hasMore) {\n                setPage(old => old + 1);\n                window.scrollTo(0, -500);\n              }\n            },\n            disabled: isPreviousData || !data.hasMore,\n            className: \"jsx-1563327456\",\n            children: \"Next Page\"\n          })]\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"1563327456\",\n      children: [\".communities-container.jsx-1563327456{position:relative;margin-bottom:40px;min-height:20px;}\", \".page-handlers.jsx-1563327456{position:absolute;bottom:-20px;right:30px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;height:28px;width:calc(100% - 30px);-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;}\", \"button.jsx-1563327456{height:70%;width:90px;margin:0 5px;font-size:0.6rem;}\"]\n    })]\n  });\n};\n\nexport default Communities;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityQuestion from \"./CommunityQuestion\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\nimport PageHandlers from \"./PageHandlers\";\n\nvar CommunityQuestions = function CommunityQuestions(_ref) {\n  var community = _ref.community;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var fetchPosts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(host, \"/communities/\").concat(community, \"/posts?page=\").concat(page, \"&limit=20\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchPosts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useQuery = useQuery([\"community-posts\", page], function () {\n    return fetchPosts(page);\n  }, {\n    keepPreviousData: true,\n    cacheTime: 0\n  }),\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      isPreviousData = _useQuery.isPreviousData;\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }) : isError ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]),\n          children: error.message\n        }) : /*#__PURE__*/_jsxs(React.Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.map(function (post) {\n              return /*#__PURE__*/_jsx(CommunityQuestion, {\n                post: post\n              }, post.uuid);\n            })\n          }), /*#__PURE__*/_jsx(PageHandlers, {\n            page: page,\n            setPage: setPage,\n            isPreviousData: isPreviousData,\n            hasMore: data.hasMore,\n            width: 90\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Aside, {\n        borderSide: \"left\"\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"4247878222\",\n      dynamic: [css.headerBackground],\n      children: [\".community-post-header-container.__jsx-style-dynamic-selector{width:100%;background:\".concat(css.headerBackground, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\"), \".header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;}\", \".header-title.__jsx-style-dynamic-selector{margin:20px 0;}\", \".header-description.__jsx-style-dynamic-selector{margin-bottom:20px;}\", \".community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}\", \".posts-container.__jsx-style-dynamic-selector{width:80%;}\", \".community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\"]\n    })]\n  });\n};\n\nexport default CommunityQuestions;","map":null,"metadata":{},"sourceType":"module"}
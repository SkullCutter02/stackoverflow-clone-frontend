{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortDown, faSortUp } from \"@fortawesome/free-solid-svg-icons\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { useRouter } from \"next/router\";\nimport * as css from \"../utils/cssVariables\";\nimport AskedBy from \"./AskedBy\";\nimport { UserContext } from \"../context/UserContext\";\nimport hljs from \"highlight.js\";\nimport host from \"../utils/host\";\n\nconst Answer = ({\n  comment\n}) => {\n  var _userContext$user;\n\n  const {\n    0: votes,\n    1: setVotes\n  } = useState(comment.votes);\n  const {\n    0: upvoteColor,\n    1: setUpvoteColor\n  } = useState(\"grey\");\n  const {\n    0: downvoteColor,\n    1: setDownvoteColor\n  } = useState(\"grey\");\n  const userContext = useContext(UserContext);\n  const router = useRouter();\n  const style = {\n    cursor: \"pointer\"\n  };\n  useEffect(() => {\n    const pres = document.querySelectorAll(\"pre\");\n\n    for (let i = 0; i < pres.length; i++) {\n      hljs.highlightBlock(pres[i]);\n    }\n  }, []);\n  useEffect(() => {\n    if (userContext.user) {\n      fetch(`${host}/posts/comments/${comment.uuid}/vote/status`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.status) {\n          if (data.type === \"upvote\") {\n            setUpvoteColor(css.upvote);\n          } else if (data.type === \"downvote\") {\n            setDownvoteColor(css.downvote);\n          }\n        }\n      });\n    }\n  }, [userContext]);\n\n  const vote = async voteType => {\n    if (userContext.user) {\n      if (userContext.user.uuid !== comment.user.uuid) {\n        fetch(`${host}/posts/comments/${comment.uuid}/vote/status`);\n      } else {\n        alert(\"You can't vote on your own comment!\");\n      }\n    } else {\n      await router.push(\"/auth/signup\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"answer-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"votes\",\n        children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faSortUp,\n          color: upvoteColor,\n          style: style,\n          size: \"2x\",\n          onClick: () => vote(\"upvote\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"#c6c6c6\",\n            margin: \"-8px 0\"\n          },\n          className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"vote-count\",\n          children: votes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n          icon: faSortDown,\n          color: downvoteColor,\n          style: style,\n          size: \"2x\",\n          onClick: () => vote(\"downvote\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          width: \"95%\"\n        },\n        className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]),\n        children: [/*#__PURE__*/_jsxDEV(ReactMarkdown, {\n          className: \"preview answer-pre\",\n          source: comment.body,\n          plugins: [remarkGfm]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"1321083110\", [css.floatingPostBackground]]]) + \" \" + \"user\",\n          children: /*#__PURE__*/_jsxDEV(AskedBy, {\n            type: \"answered\",\n            username: comment.user.username,\n            createdAt: comment.createdAt,\n            postUuid: comment.user.uuid,\n            userUuid: userContext === null || userContext === void 0 ? void 0 : (_userContext$user = userContext.user) === null || _userContext$user === void 0 ? void 0 : _userContext$user.uuid,\n            reputation: comment.user.reputation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"1321083110\",\n      dynamic: [css.floatingPostBackground],\n      children: `.answer-container.__jsx-style-dynamic-selector{width:100%;margin-bottom:30px;padding:5px 5px 20px;border-radius:10px;background:${css.floatingPostBackground};position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.user.__jsx-style-dynamic-selector{position:absolute;bottom:10px;right:5px;}.votes.__jsx-style-dynamic-selector{width:5%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin-top:14px;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9BbnN3ZXIudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXFIa0IsQUFHc0IsQUFVTyxBQU1ULFNBQ0ksRUFoQk0sT0FVUCxZQVRTLEFBVVgsVUFDWixXQVZxQixtQkFDcUIsYUFjbEIsMkJBYkosa0JBQ0wsaUNBYU0seUNBWnJCLG9EQWE2Qix5R0FDWCxnQkFDbEIiLCJmaWxlIjoiL1VzZXJzL3NrdWxsY3V0dGVyL1dlYlN0b3JtUHJvamVjdHMvc3RhY2tvdmVyZmxvdy1jbG9uZS9mcm9udGVuZC9jb21wb25lbnRzL0Fuc3dlci50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VTdGF0ZSwgdXNlQ29udGV4dCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgRm9udEF3ZXNvbWVJY29uIH0gZnJvbSBcIkBmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZVwiO1xuaW1wb3J0IHsgZmFTb3J0RG93biwgZmFTb3J0VXAgfSBmcm9tIFwiQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zXCI7XG5pbXBvcnQgUmVhY3RNYXJrZG93biBmcm9tIFwicmVhY3QtbWFya2Rvd25cIjtcbmltcG9ydCByZW1hcmtHZm0gZnJvbSBcInJlbWFyay1nZm1cIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuXG5pbXBvcnQgeyBDb21tZW50VHlwZSB9IGZyb20gXCIuLi91dGlscy90eXBlcy9pbmRpdmlkdWFsUXVlc3Rpb25UeXBlXCI7XG5pbXBvcnQgeyBWb3RlVHlwZSB9IGZyb20gXCIuLi91dGlscy90eXBlcy92b3RlVHlwZVwiO1xuaW1wb3J0ICogYXMgY3NzIGZyb20gXCIuLi91dGlscy9jc3NWYXJpYWJsZXNcIjtcbmltcG9ydCBBc2tlZEJ5IGZyb20gXCIuL0Fza2VkQnlcIjtcbmltcG9ydCB7IFVzZXJDb250ZXh0IH0gZnJvbSBcIi4uL2NvbnRleHQvVXNlckNvbnRleHRcIjtcbmltcG9ydCBobGpzIGZyb20gXCJoaWdobGlnaHQuanNcIjtcbmltcG9ydCBob3N0IGZyb20gXCIuLi91dGlscy9ob3N0XCI7XG5cbmludGVyZmFjZSBQcm9wcyB7XG4gIGNvbW1lbnQ6IENvbW1lbnRUeXBlO1xufVxuXG5jb25zdCBBbnN3ZXI6IFJlYWN0LkZDPFByb3BzPiA9ICh7IGNvbW1lbnQgfSkgPT4ge1xuICBjb25zdCBbdm90ZXMsIHNldFZvdGVzXSA9IHVzZVN0YXRlPG51bWJlcj4oY29tbWVudC52b3Rlcyk7XG4gIGNvbnN0IFt1cHZvdGVDb2xvciwgc2V0VXB2b3RlQ29sb3JdID0gdXNlU3RhdGU8c3RyaW5nPihcImdyZXlcIik7XG4gIGNvbnN0IFtkb3dudm90ZUNvbG9yLCBzZXREb3dudm90ZUNvbG9yXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJncmV5XCIpO1xuXG4gIGNvbnN0IHVzZXJDb250ZXh0ID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IHN0eWxlID0geyBjdXJzb3I6IFwicG9pbnRlclwiIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBwcmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcInByZVwiKTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgaGxqcy5oaWdobGlnaHRCbG9jayhwcmVzW2ldKTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICh1c2VyQ29udGV4dC51c2VyKSB7XG4gICAgICBmZXRjaChgJHtob3N0fS9wb3N0cy9jb21tZW50cy8ke2NvbW1lbnQudXVpZH0vdm90ZS9zdGF0dXNgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJVdWlkOiB1c2VyQ29udGV4dC51c2VyLnV1aWQsXG4gICAgICAgIH0pLFxuICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgICAgLnRoZW4oKGRhdGE6IFZvdGVUeXBlKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzKSB7XG4gICAgICAgICAgICBpZiAoZGF0YS50eXBlID09PSBcInVwdm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFVwdm90ZUNvbG9yKGNzcy51cHZvdGUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09IFwiZG93bnZvdGVcIikge1xuICAgICAgICAgICAgICBzZXREb3dudm90ZUNvbG9yKGNzcy5kb3dudm90ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gIH0sIFt1c2VyQ29udGV4dF0pO1xuXG4gIGNvbnN0IHZvdGUgPSBhc3luYyAodm90ZVR5cGU6IFwidXB2b3RlXCIgfCBcImRvd252b3RlXCIpID0+IHtcbiAgICBpZiAodXNlckNvbnRleHQudXNlcikge1xuICAgICAgaWYgKHVzZXJDb250ZXh0LnVzZXIudXVpZCAhPT0gY29tbWVudC51c2VyLnV1aWQpIHtcbiAgICAgICAgZmV0Y2goYCR7aG9zdH0vcG9zdHMvY29tbWVudHMvJHtjb21tZW50LnV1aWR9L3ZvdGUvc3RhdHVzYCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGVydChcIllvdSBjYW4ndCB2b3RlIG9uIHlvdXIgb3duIGNvbW1lbnQhXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCByb3V0ZXIucHVzaChcIi9hdXRoL3NpZ251cFwiKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImFuc3dlci1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2b3Rlc1wiPlxuICAgICAgICAgIDxGb250QXdlc29tZUljb25cbiAgICAgICAgICAgIGljb249e2ZhU29ydFVwfVxuICAgICAgICAgICAgY29sb3I9e3Vwdm90ZUNvbG9yfVxuICAgICAgICAgICAgc3R5bGU9e3N0eWxlfVxuICAgICAgICAgICAgc2l6ZT17XCIyeFwifVxuICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdm90ZShcInVwdm90ZVwiKX1cbiAgICAgICAgICAvPlxuICAgICAgICAgIDxwXG4gICAgICAgICAgICBjbGFzc05hbWU9XCJ2b3RlLWNvdW50XCJcbiAgICAgICAgICAgIHN0eWxlPXt7IGNvbG9yOiBcIiNjNmM2YzZcIiwgbWFyZ2luOiBcIi04cHggMFwiIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3ZvdGVzfVxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uXG4gICAgICAgICAgICBpY29uPXtmYVNvcnREb3dufVxuICAgICAgICAgICAgY29sb3I9e2Rvd252b3RlQ29sb3J9XG4gICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICBzaXplPXtcIjJ4XCJ9XG4gICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB2b3RlKFwiZG93bnZvdGVcIil9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgc3R5bGU9e3sgd2lkdGg6IFwiOTUlXCIgfX0+XG4gICAgICAgICAgPFJlYWN0TWFya2Rvd25cbiAgICAgICAgICAgIGNsYXNzTmFtZT1cInByZXZpZXcgYW5zd2VyLXByZVwiXG4gICAgICAgICAgICBzb3VyY2U9e2NvbW1lbnQuYm9keX1cbiAgICAgICAgICAgIHBsdWdpbnM9e1tyZW1hcmtHZm1dfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ1c2VyXCI+XG4gICAgICAgICAgICA8QXNrZWRCeVxuICAgICAgICAgICAgICB0eXBlPXtcImFuc3dlcmVkXCJ9XG4gICAgICAgICAgICAgIHVzZXJuYW1lPXtjb21tZW50LnVzZXIudXNlcm5hbWV9XG4gICAgICAgICAgICAgIGNyZWF0ZWRBdD17Y29tbWVudC5jcmVhdGVkQXR9XG4gICAgICAgICAgICAgIHBvc3RVdWlkPXtjb21tZW50LnVzZXIudXVpZH1cbiAgICAgICAgICAgICAgdXNlclV1aWQ9e3VzZXJDb250ZXh0Py51c2VyPy51dWlkfVxuICAgICAgICAgICAgICByZXB1dGF0aW9uPXtjb21tZW50LnVzZXIucmVwdXRhdGlvbn1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgLmFuc3dlci1jb250YWluZXIge1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMwcHg7XG4gICAgICAgICAgcGFkZGluZzogNXB4IDVweCAyMHB4O1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogJHtjc3MuZmxvYXRpbmdQb3N0QmFja2dyb3VuZH07XG4gICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIH1cblxuICAgICAgICAudXNlciB7XG4gICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgIGJvdHRvbTogMTBweDtcbiAgICAgICAgICByaWdodDogNXB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLnZvdGVzIHtcbiAgICAgICAgICB3aWR0aDogNSU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDE0cHg7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQW5zd2VyO1xuIl19 */\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx */`\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\nexport default Answer;","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Answer.tsx"],"names":["React","useEffect","useState","useContext","FontAwesomeIcon","faSortDown","faSortUp","ReactMarkdown","remarkGfm","useRouter","css","AskedBy","UserContext","hljs","host","Answer","comment","votes","setVotes","upvoteColor","setUpvoteColor","downvoteColor","setDownvoteColor","userContext","router","style","cursor","pres","document","querySelectorAll","i","length","highlightBlock","user","fetch","uuid","method","headers","body","JSON","stringify","userUuid","then","res","json","data","status","type","upvote","downvote","vote","voteType","alert","push","floatingPostBackground","color","margin","width","username","createdAt","reputation"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortDown, faSortUp } from \"@fortawesome/free-solid-svg-icons\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { useRouter } from \"next/router\";\n\nimport { CommentType } from \"../utils/types/individualQuestionType\";\nimport { VoteType } from \"../utils/types/voteType\";\nimport * as css from \"../utils/cssVariables\";\nimport AskedBy from \"./AskedBy\";\nimport { UserContext } from \"../context/UserContext\";\nimport hljs from \"highlight.js\";\nimport host from \"../utils/host\";\n\ninterface Props {\n  comment: CommentType;\n}\n\nconst Answer: React.FC<Props> = ({ comment }) => {\n  const [votes, setVotes] = useState<number>(comment.votes);\n  const [upvoteColor, setUpvoteColor] = useState<string>(\"grey\");\n  const [downvoteColor, setDownvoteColor] = useState<string>(\"grey\");\n\n  const userContext = useContext(UserContext);\n  const router = useRouter();\n\n  const style = { cursor: \"pointer\" };\n\n  useEffect(() => {\n    const pres = document.querySelectorAll(\"pre\");\n\n    for (let i = 0; i < pres.length; i++) {\n      hljs.highlightBlock(pres[i]);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (userContext.user) {\n      fetch(`${host}/posts/comments/${comment.uuid}/vote/status`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((data: VoteType) => {\n          if (data.status) {\n            if (data.type === \"upvote\") {\n              setUpvoteColor(css.upvote);\n            } else if (data.type === \"downvote\") {\n              setDownvoteColor(css.downvote);\n            }\n          }\n        });\n    }\n  }, [userContext]);\n\n  const vote = async (voteType: \"upvote\" | \"downvote\") => {\n    if (userContext.user) {\n      if (userContext.user.uuid !== comment.user.uuid) {\n        fetch(`${host}/posts/comments/${comment.uuid}/vote/status`);\n      } else {\n        alert(\"You can't vote on your own comment!\");\n      }\n    } else {\n      await router.push(\"/auth/signup\");\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <div className=\"answer-container\">\n        <div className=\"votes\">\n          <FontAwesomeIcon\n            icon={faSortUp}\n            color={upvoteColor}\n            style={style}\n            size={\"2x\"}\n            onClick={() => vote(\"upvote\")}\n          />\n          <p\n            className=\"vote-count\"\n            style={{ color: \"#c6c6c6\", margin: \"-8px 0\" }}\n          >\n            {votes}\n          </p>\n          <FontAwesomeIcon\n            icon={faSortDown}\n            color={downvoteColor}\n            style={style}\n            size={\"2x\"}\n            onClick={() => vote(\"downvote\")}\n          />\n        </div>\n        <div style={{ width: \"95%\" }}>\n          <ReactMarkdown\n            className=\"preview answer-pre\"\n            source={comment.body}\n            plugins={[remarkGfm]}\n          />\n          <div className=\"user\">\n            <AskedBy\n              type={\"answered\"}\n              username={comment.user.username}\n              createdAt={comment.createdAt}\n              postUuid={comment.user.uuid}\n              userUuid={userContext?.user?.uuid}\n              reputation={comment.user.reputation}\n            />\n          </div>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .answer-container {\n          width: 100%;\n          margin-bottom: 30px;\n          padding: 5px 5px 20px;\n          border-radius: 10px;\n          background: ${css.floatingPostBackground};\n          position: relative;\n          display: flex;\n        }\n\n        .user {\n          position: absolute;\n          bottom: 10px;\n          right: 5px;\n        }\n\n        .votes {\n          width: 5%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          margin-top: 14px;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default Answer;\n"]},"metadata":{},"sourceType":"module"}
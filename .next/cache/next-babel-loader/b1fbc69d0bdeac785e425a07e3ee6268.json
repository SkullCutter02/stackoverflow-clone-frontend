{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortUp, faSortDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { useRouter } from \"next/router\";\nimport Aside from \"./Aside\";\nimport host from \"../utils/host\";\nimport { UserContext } from \"../context/UserContext\";\nimport { getCookie } from \"../utils/functions\";\n\nvar Question = function Question(_ref) {\n  _s();\n\n  var data = _ref.data;\n\n  var _useState = useState(data.votes),\n      votes = _useState[0],\n      setVotes = _useState[1];\n\n  var _useState2 = useState(\"grey\"),\n      upvoteColor = _useState2[0],\n      setUpvoteColor = _useState2[1];\n\n  var _useState3 = useState(\"grey\"),\n      downvoteColor = _useState3[0],\n      setDownvoteColor = _useState3[1];\n\n  var userContext = useContext(UserContext);\n  var router = useRouter();\n  var style = {\n    cursor: \"pointer\"\n  };\n  useEffect(function () {\n    fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote/status\"), {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        userUuid: userContext.user.uuid\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data2) {\n      if (data2.status) {\n        if (data2.type === \"upvote\") {\n          setUpvoteColor(\"orange\");\n        }\n      }\n    });\n  }, []);\n\n  var vote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(voteType) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!userContext.user) {\n                _context.next = 6;\n                break;\n              }\n\n              fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote/status\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid\n                })\n              }).then(function (res) {\n                return res.json();\n              }).then(function (data2) {\n                if (data2.status === false) {\n                  if (voteType === \"upvote\") {\n                    setVotes(data.votes + 1);\n                  } else if (voteType === \"downvote\") {\n                    setVotes(data.votes - 1);\n                  }\n                } else if (data2.status === true) {\n                  if (data2.type === \"upvote\" && voteType === \"upvote\") {\n                    setVotes(data.votes);\n                  } else if (data2.type === \"downvote\" && voteType === \"downvote\") {\n                    setVotes(data.votes);\n                  } else if (data2.type === \"upvote\" && voteType === \"downvote\") {\n                    setVotes(data.votes - 1);\n                  } else if (data2.type === \"downvote\" && voteType === \"upvote\") {\n                    setVotes(data.votes + 1);\n                  }\n                }\n              });\n              _context.next = 4;\n              return fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(getCookie(\"token\"))\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid,\n                  voteType: voteType\n                })\n              });\n\n            case 4:\n              _context.next = 8;\n              break;\n\n            case 6:\n              _context.next = 8;\n              return router.push(\"/auth/signup\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function vote(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"jsx-2426090784\",\n      children: data.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-2426090784\" + \" \" + \"h1-border-btm\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"jsx-2426090784\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-2426090784\" + \" \" + \"question-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2426090784\" + \" \" + \"main\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2426090784\" + \" \" + \"votes\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSortUp,\n              color: upvoteColor,\n              style: style,\n              size: \"2x\",\n              onClick: function onClick() {\n                return vote(\"upvote\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#c6c6c6\",\n                margin: \"-8px 0\"\n              },\n              className: \"jsx-2426090784\" + \" \" + \"vote-count\",\n              children: votes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSortDown,\n              color: downvoteColor,\n              style: style,\n              size: \"2x\",\n              onClick: function onClick() {\n                return vote(\"downvote\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2426090784\" + \" \" + \"main-right\",\n            children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n              source: data.body,\n              plugins: [remarkGfm]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Aside, {\n        borderSide: \"left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"2426090784\",\n      children: \"main.jsx-2426090784{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.question-container.jsx-2426090784{width:73%;margin:0 auto;}h1.jsx-2426090784{font-size:1.3rem;line-height:1.4em;margin:20px auto;width:88%;}.h1-border-btm.jsx-2426090784{width:93%;margin:0 auto;border-bottom:1px solid #fff;}.main.jsx-2426090784{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;}.votes.jsx-2426090784{width:5%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin-right:10px;}.main-right.jsx-2426090784{width:95%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9RdWVzdGlvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0lrQixBQUd3QixBQUtILEFBS08sQUFPUCxBQU1HLEFBS0osQUFTQyxTQVJHLENBdkJDLEFBWUEsQUFvQmhCLE9BM0JvQixPQUpwQixBQVkrQixXQVBaLGlCQUNQLENBT1osU0FOQSxZQWJnQyxBQXVCaEIsU0FNUSxLQUx4Qix5RUFNcUIsNEJBN0JyQixpRUE4QjZCLHlHQUNULGtCQUNwQiIsImZpbGUiOiIvVXNlcnMvc2t1bGxjdXR0ZXIvV2ViU3Rvcm1Qcm9qZWN0cy9zdGFja292ZXJmbG93LWNsb25lL2Zyb250ZW5kL2NvbXBvbmVudHMvUXVlc3Rpb24udHN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCBSZWFjdE1hcmtkb3duIGZyb20gXCJyZWFjdC1tYXJrZG93blwiO1xuaW1wb3J0IHJlbWFya0dmbSBmcm9tIFwicmVtYXJrLWdmbVwiO1xuaW1wb3J0IHsgRm9udEF3ZXNvbWVJY29uIH0gZnJvbSBcIkBmb3J0YXdlc29tZS9yZWFjdC1mb250YXdlc29tZVwiO1xuaW1wb3J0IHsgZmFTb3J0VXAsIGZhU29ydERvd24gfSBmcm9tIFwiQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zXCI7XG5pbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tIFwibmV4dC9yb3V0ZXJcIjtcblxuaW1wb3J0IHsgUXVlc3Rpb25UeXBlIH0gZnJvbSBcIi4uL3V0aWxzL3R5cGVzL2luZGl2aWR1YWxRdWVzdGlvblR5cGVcIjtcbmltcG9ydCBBc2lkZSBmcm9tIFwiLi9Bc2lkZVwiO1xuaW1wb3J0IGhvc3QgZnJvbSBcIi4uL3V0aWxzL2hvc3RcIjtcbmltcG9ydCB7IFVzZXJDb250ZXh0IH0gZnJvbSBcIi4uL2NvbnRleHQvVXNlckNvbnRleHRcIjtcbmltcG9ydCB7IGdldENvb2tpZSB9IGZyb20gXCIuLi91dGlscy9mdW5jdGlvbnNcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgZGF0YTogUXVlc3Rpb25UeXBlO1xufVxuXG5jb25zdCBRdWVzdGlvbjogUmVhY3QuRkM8UHJvcHM+ID0gKHsgZGF0YSB9KSA9PiB7XG4gIGNvbnN0IFt2b3Rlcywgc2V0Vm90ZXNdID0gdXNlU3RhdGU8bnVtYmVyPihkYXRhLnZvdGVzKTtcbiAgY29uc3QgW3Vwdm90ZUNvbG9yLCBzZXRVcHZvdGVDb2xvcl0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiZ3JleVwiKTtcbiAgY29uc3QgW2Rvd252b3RlQ29sb3IsIHNldERvd252b3RlQ29sb3JdID0gdXNlU3RhdGU8c3RyaW5nPihcImdyZXlcIik7XG4gIGNvbnN0IHVzZXJDb250ZXh0ID0gdXNlQ29udGV4dChVc2VyQ29udGV4dCk7XG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xuXG4gIGNvbnN0IHN0eWxlID0geyBjdXJzb3I6IFwicG9pbnRlclwiIH07XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBmZXRjaChgJHtob3N0fS9wb3N0cy8ke2RhdGEudXVpZH0vdm90ZS9zdGF0dXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIHVzZXJVdWlkOiB1c2VyQ29udGV4dC51c2VyLnV1aWQsXG4gICAgICB9KSxcbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAgIC50aGVuKChkYXRhMikgPT4ge1xuICAgICAgICBpZiAoZGF0YTIuc3RhdHVzKSB7XG4gICAgICAgICAgaWYgKGRhdGEyLnR5cGUgPT09IFwidXB2b3RlXCIpIHtcbiAgICAgICAgICAgIHNldFVwdm90ZUNvbG9yKFwib3JhbmdlXCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0sIFtdKTtcblxuICBjb25zdCB2b3RlID0gYXN5bmMgKHZvdGVUeXBlOiBcInVwdm90ZVwiIHwgXCJkb3dudm90ZVwiKSA9PiB7XG4gICAgaWYgKHVzZXJDb250ZXh0LnVzZXIpIHtcbiAgICAgIGZldGNoKGAke2hvc3R9L3Bvc3RzLyR7ZGF0YS51dWlkfS92b3RlL3N0YXR1c2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdXNlclV1aWQ6IHVzZXJDb250ZXh0LnVzZXIudXVpZCxcbiAgICAgICAgfSksXG4gICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigoZGF0YTIpID0+IHtcbiAgICAgICAgICBpZiAoZGF0YTIuc3RhdHVzID09PSBmYWxzZSkge1xuICAgICAgICAgICAgaWYgKHZvdGVUeXBlID09PSBcInVwdm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFZvdGVzKGRhdGEudm90ZXMgKyAxKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodm90ZVR5cGUgPT09IFwiZG93bnZvdGVcIikge1xuICAgICAgICAgICAgICBzZXRWb3RlcyhkYXRhLnZvdGVzIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkYXRhMi5zdGF0dXMgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGlmIChkYXRhMi50eXBlID09PSBcInVwdm90ZVwiICYmIHZvdGVUeXBlID09PSBcInVwdm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFZvdGVzKGRhdGEudm90ZXMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhMi50eXBlID09PSBcImRvd252b3RlXCIgJiYgdm90ZVR5cGUgPT09IFwiZG93bnZvdGVcIikge1xuICAgICAgICAgICAgICBzZXRWb3RlcyhkYXRhLnZvdGVzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YTIudHlwZSA9PT0gXCJ1cHZvdGVcIiAmJiB2b3RlVHlwZSA9PT0gXCJkb3dudm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFZvdGVzKGRhdGEudm90ZXMgLSAxKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YTIudHlwZSA9PT0gXCJkb3dudm90ZVwiICYmIHZvdGVUeXBlID09PSBcInVwdm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldFZvdGVzKGRhdGEudm90ZXMgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgYXdhaXQgZmV0Y2goYCR7aG9zdH0vcG9zdHMvJHtkYXRhLnV1aWR9L3ZvdGVgLCB7XG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7Z2V0Q29va2llKFwidG9rZW5cIil9YCxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHVzZXJVdWlkOiB1c2VyQ29udGV4dC51c2VyLnV1aWQsXG4gICAgICAgICAgdm90ZVR5cGU6IHZvdGVUeXBlLFxuICAgICAgICB9KSxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCByb3V0ZXIucHVzaChcIi9hdXRoL3NpZ251cFwiKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8aDE+e2RhdGEudGl0bGV9PC9oMT5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiaDEtYm9yZGVyLWJ0bVwiIC8+XG4gICAgICA8bWFpbj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJxdWVzdGlvbi1jb250YWluZXJcIj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidm90ZXNcIj5cbiAgICAgICAgICAgICAgPEZvbnRBd2Vzb21lSWNvblxuICAgICAgICAgICAgICAgIGljb249e2ZhU29ydFVwfVxuICAgICAgICAgICAgICAgIGNvbG9yPXt1cHZvdGVDb2xvcn1cbiAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICAgICAgc2l6ZT17XCIyeFwifVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZvdGUoXCJ1cHZvdGVcIil9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDxwXG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidm90ZS1jb3VudFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgY29sb3I6IFwiI2M2YzZjNlwiLCBtYXJnaW46IFwiLThweCAwXCIgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHt2b3Rlc31cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uXG4gICAgICAgICAgICAgICAgaWNvbj17ZmFTb3J0RG93bn1cbiAgICAgICAgICAgICAgICBjb2xvcj17ZG93bnZvdGVDb2xvcn1cbiAgICAgICAgICAgICAgICBzdHlsZT17c3R5bGV9XG4gICAgICAgICAgICAgICAgc2l6ZT17XCIyeFwifVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHZvdGUoXCJkb3dudm90ZVwiKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtYWluLXJpZ2h0XCI+XG4gICAgICAgICAgICAgIDxSZWFjdE1hcmtkb3duIHNvdXJjZT17ZGF0YS5ib2R5fSBwbHVnaW5zPXtbcmVtYXJrR2ZtXX0gLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPEFzaWRlIGJvcmRlclNpZGU9e1wibGVmdFwifSAvPlxuICAgICAgPC9tYWluPlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIG1haW4ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLnF1ZXN0aW9uLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDczJTtcbiAgICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICAgICAgfVxuXG4gICAgICAgIGgxIHtcbiAgICAgICAgICBmb250LXNpemU6IDEuM3JlbTtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS40ZW07XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87XG4gICAgICAgICAgd2lkdGg6IDg4JTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5oMS1ib3JkZXItYnRtIHtcbiAgICAgICAgICB3aWR0aDogOTMlO1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZmZmO1xuICAgICAgICB9XG5cbiAgICAgICAgLm1haW4ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgIH1cblxuICAgICAgICAudm90ZXMge1xuICAgICAgICAgIHdpZHRoOiA1JTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgLm1haW4tcmlnaHQge1xuICAgICAgICAgIHdpZHRoOiA5NSU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUXVlc3Rpb247XG4iXX0= */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx */\"\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Question, \"I6vaFkRatAuPG4G+CwhBMxjQvOo=\", false, function () {\n  return [useRouter];\n});\n\n_c = Question;\nexport default Question;\n\nvar _c;\n\n$RefreshReg$(_c, \"Question\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx"],"names":["React","useContext","useState","useEffect","ReactMarkdown","remarkGfm","FontAwesomeIcon","faSortUp","faSortDown","useRouter","Aside","host","UserContext","getCookie","Question","data","votes","setVotes","upvoteColor","setUpvoteColor","downvoteColor","setDownvoteColor","userContext","router","style","cursor","fetch","uuid","method","headers","body","JSON","stringify","userUuid","user","then","res","json","data2","status","type","vote","voteType","Authorization","push","title","color","margin"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortUp, faSortDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { useRouter } from \"next/router\";\n\nimport { QuestionType } from \"../utils/types/individualQuestionType\";\nimport Aside from \"./Aside\";\nimport host from \"../utils/host\";\nimport { UserContext } from \"../context/UserContext\";\nimport { getCookie } from \"../utils/functions\";\n\ninterface Props {\n  data: QuestionType;\n}\n\nconst Question: React.FC<Props> = ({ data }) => {\n  const [votes, setVotes] = useState<number>(data.votes);\n  const [upvoteColor, setUpvoteColor] = useState<string>(\"grey\");\n  const [downvoteColor, setDownvoteColor] = useState<string>(\"grey\");\n  const userContext = useContext(UserContext);\n  const router = useRouter();\n\n  const style = { cursor: \"pointer\" };\n\n  useEffect(() => {\n    fetch(`${host}/posts/${data.uuid}/vote/status`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        userUuid: userContext.user.uuid,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data2) => {\n        if (data2.status) {\n          if (data2.type === \"upvote\") {\n            setUpvoteColor(\"orange\");\n          }\n        }\n      });\n  }, []);\n\n  const vote = async (voteType: \"upvote\" | \"downvote\") => {\n    if (userContext.user) {\n      fetch(`${host}/posts/${data.uuid}/vote/status`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((data2) => {\n          if (data2.status === false) {\n            if (voteType === \"upvote\") {\n              setVotes(data.votes + 1);\n            } else if (voteType === \"downvote\") {\n              setVotes(data.votes - 1);\n            }\n          } else if (data2.status === true) {\n            if (data2.type === \"upvote\" && voteType === \"upvote\") {\n              setVotes(data.votes);\n            } else if (data2.type === \"downvote\" && voteType === \"downvote\") {\n              setVotes(data.votes);\n            } else if (data2.type === \"upvote\" && voteType === \"downvote\") {\n              setVotes(data.votes - 1);\n            } else if (data2.type === \"downvote\" && voteType === \"upvote\") {\n              setVotes(data.votes + 1);\n            }\n          }\n        });\n      await fetch(`${host}/posts/${data.uuid}/vote`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${getCookie(\"token\")}`,\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid,\n          voteType: voteType,\n        }),\n      });\n    } else {\n      await router.push(\"/auth/signup\");\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <h1>{data.title}</h1>\n      <div className=\"h1-border-btm\" />\n      <main>\n        <div className=\"question-container\">\n          <div className=\"main\">\n            <div className=\"votes\">\n              <FontAwesomeIcon\n                icon={faSortUp}\n                color={upvoteColor}\n                style={style}\n                size={\"2x\"}\n                onClick={() => vote(\"upvote\")}\n              />\n              <p\n                className=\"vote-count\"\n                style={{ color: \"#c6c6c6\", margin: \"-8px 0\" }}\n              >\n                {votes}\n              </p>\n              <FontAwesomeIcon\n                icon={faSortDown}\n                color={downvoteColor}\n                style={style}\n                size={\"2x\"}\n                onClick={() => vote(\"downvote\")}\n              />\n            </div>\n            <div className=\"main-right\">\n              <ReactMarkdown source={data.body} plugins={[remarkGfm]} />\n            </div>\n          </div>\n        </div>\n        <Aside borderSide={\"left\"} />\n      </main>\n\n      <style jsx>{`\n        main {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .question-container {\n          width: 73%;\n          margin: 0 auto;\n        }\n\n        h1 {\n          font-size: 1.3rem;\n          line-height: 1.4em;\n          margin: 20px auto;\n          width: 88%;\n        }\n\n        .h1-border-btm {\n          width: 93%;\n          margin: 0 auto;\n          border-bottom: 1px solid #fff;\n        }\n\n        .main {\n          display: flex;\n          margin: 20px 0;\n        }\n\n        .votes {\n          width: 5%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          margin-right: 10px;\n        }\n\n        .main-right {\n          width: 95%;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default Question;\n"]},"metadata":{},"sourceType":"module"}
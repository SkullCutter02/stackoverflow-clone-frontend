{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState, useEffect } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport Community from \"./Community\";\nimport PageHandlers from \"./PageHandlers\";\n\nconst Communities = ({\n  filter\n}) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n\n  const fetchCommunities = async (page = 1, filter = \"\") => {\n    const res = await fetch(`${host}/communities?page=${page}&limit=20&filter=${filter}`);\n    const data = await res.json();\n    return data;\n  };\n\n  const {\n    isLoading,\n    isError,\n    error,\n    data,\n    isPreviousData\n  } = useQuery([\"communities\", page, filter], () => fetchCommunities(page, filter), {\n    keepPreviousData: true\n  });\n  useEffect(() => {\n    setPage(1);\n  }, [filter]);\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: \"jsx-1207264256\" + \" \" + \"communities-container\",\n      children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n        className: \"jsx-1207264256\",\n        children: \"Loading...\"\n      }) : isError ? /*#__PURE__*/_jsxs(\"div\", {\n        className: \"jsx-1207264256\",\n        children: [\"Error: \", error.message]\n      }) : /*#__PURE__*/_jsxs(React.Fragment, {\n        children: [data.communities.map(community => /*#__PURE__*/_jsx(Community, {\n          uuid: community.uuid,\n          name: community.name,\n          description: community.description,\n          count: community.posts.length\n        }, community.uuid)), /*#__PURE__*/_jsx(PageHandlers, {\n          page: page,\n          setPage: setPage,\n          isPreviousData: isPreviousData,\n          hasMore: data.hasMore,\n          width: 96\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"1207264256\",\n      children: [\".communities-container.jsx-1207264256{position:relative;margin-bottom:40px;min-height:20px;}\"]\n    })]\n  });\n};\n\nexport default Communities;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/pages/[community]/index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../../utils/host\";\nimport Aside from \"../../components/Aside\";\nimport * as css from \"../../utils/cssVariables\";\nimport CommunityPost from \"../../components/CommunityPost\";\n\nvar CommunityPostPage = function CommunityPostPage(_ref) {\n  _s();\n\n  var community = _ref.community;\n\n  var _useState = useState(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var fetchPosts = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(page) {\n      var res, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(host, \"/communities/\").concat(community, \"/posts?page=\").concat(page, \"&limit=10\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              data = _context.sent;\n              return _context.abrupt(\"return\", data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchPosts(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useQuery = useQuery([\"community-posts\", page], function () {\n    return fetchPosts(page);\n  }, {\n    keepPreviousData: true,\n    cacheTime: 0\n  }),\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      isPreviousData = _useQuery.isPreviousData;\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, _this) : isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]),\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 13\n        }, _this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [data.posts.map(function (post) {\n            return /*#__PURE__*/_jsxDEV(CommunityPost, {\n              uuid: post.uuid,\n              title: post.title,\n              body: post.body,\n              username: post.user.username\n            }, post.uuid, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 17\n            }, _this);\n          }), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"page-handlers\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]) + \" \" + \"current-page\",\n              children: [\"Current Page: \", page]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                return setPage(function (old) {\n                  return Math.max(old - 1, 0);\n                });\n              },\n              disabled: page === 1,\n              className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]),\n              children: \"Previous Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                if (!isPreviousData && data.hasMore) {\n                  setPage(function (old) {\n                    return old + 1;\n                  });\n                }\n              },\n              disabled: isPreviousData || !data.hasMore,\n              className: _JSXStyle.dynamic([[\"328181245\", [css.headerBackground]]]),\n              children: \"Next Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, _this), /*#__PURE__*/_jsxDEV(Aside, {\n        borderSide: \"left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"328181245\",\n      dynamic: [css.headerBackground],\n      children: \".community-post-header-container.__jsx-style-dynamic-selector{height:140px;width:100%;background:\".concat(css.headerBackground, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;margin:10px 0;}.community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}.posts-container.__jsx-style-dynamic-selector{width:80%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvcGFnZXMvW2NvbW11bml0eV0vaW5kZXgudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWlGa0IsQUFHd0IsQUFXSCxBQUtHLEFBS0gsVUFUSSxBQVVoQixHQXJCYSxXQUM2QixBQVcxQyx3Q0FWZSxVQWNGLFdBQ2IscURBZHdCLDhFQUNDLG1HQUNKLDZGQUNyQiIsImZpbGUiOiIvVXNlcnMvc2t1bGxjdXR0ZXIvV2ViU3Rvcm1Qcm9qZWN0cy9zdGFja292ZXJmbG93LWNsb25lL2Zyb250ZW5kL3BhZ2VzL1tjb21tdW5pdHldL2luZGV4LnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUXVlcnkgfSBmcm9tIFwicmVhY3QtcXVlcnlcIjtcbmltcG9ydCB7IEdldFNlcnZlclNpZGVQcm9wcyB9IGZyb20gXCJuZXh0XCI7XG5cbmltcG9ydCBob3N0IGZyb20gXCIuLi8uLi91dGlscy9ob3N0XCI7XG5pbXBvcnQgeyBDb21tdW5pdHlQb3N0c1R5cGUgfSBmcm9tIFwiLi4vLi4vdXRpbHMvdHlwZXMvcG9zdFR5cGVcIjtcbmltcG9ydCBBc2lkZSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9Bc2lkZVwiO1xuaW1wb3J0ICogYXMgY3NzIGZyb20gXCIuLi8uLi91dGlscy9jc3NWYXJpYWJsZXNcIjtcbmltcG9ydCBDb21tdW5pdHlQb3N0IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL0NvbW11bml0eVBvc3RcIjtcblxuaW50ZXJmYWNlIFByb3BzIHtcbiAgY29tbXVuaXR5OiBzdHJpbmc7XG59XG5cbmNvbnN0IENvbW11bml0eVBvc3RQYWdlOiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBjb21tdW5pdHkgfSkgPT4ge1xuICBjb25zdCBbcGFnZSwgc2V0UGFnZV0gPSB1c2VTdGF0ZTxudW1iZXI+KDEpO1xuXG4gIGNvbnN0IGZldGNoUG9zdHMgPSBhc3luYyAocGFnZTogbnVtYmVyKSA9PiB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXG4gICAgICBgJHtob3N0fS9jb21tdW5pdGllcy8ke2NvbW11bml0eX0vcG9zdHM/cGFnZT0ke3BhZ2V9JmxpbWl0PTEwYFxuICAgICk7XG4gICAgY29uc3QgZGF0YTogQ29tbXVuaXR5UG9zdHNUeXBlID0gYXdhaXQgcmVzLmpzb24oKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfTtcblxuICBjb25zdCB7IGlzTG9hZGluZywgaXNFcnJvciwgZXJyb3IsIGRhdGEsIGlzUHJldmlvdXNEYXRhIH0gPSB1c2VRdWVyeTxcbiAgICBDb21tdW5pdHlQb3N0c1R5cGUsXG4gICAgRXJyb3JcbiAgPihbXCJjb21tdW5pdHktcG9zdHNcIiwgcGFnZV0sICgpID0+IGZldGNoUG9zdHMocGFnZSksIHtcbiAgICBrZWVwUHJldmlvdXNEYXRhOiB0cnVlLFxuICAgIGNhY2hlVGltZTogMCxcbiAgfSk7XG5cbiAgcmV0dXJuIChcbiAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW11bml0eS1wb3N0LWhlYWRlci1jb250YWluZXJcIj5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT1cImhlYWRlci10aXRsZVwiPntkYXRhPy5jb21tdW5pdHkubmFtZX08L2gxPlxuICAgICAgICA8cCBjbGFzc05hbWU9XCJoZWFkZXItZGVzY3JpcHRpb25cIj57ZGF0YT8uY29tbXVuaXR5LmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tdW5pdHktcG9zdC1wYWdlLWNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBvc3RzLWNvbnRhaW5lclwiPlxuICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICA8ZGl2PkxvYWRpbmcuLi48L2Rpdj5cbiAgICAgICAgICApIDogaXNFcnJvciA/IChcbiAgICAgICAgICAgIDxkaXY+e2Vycm9yLm1lc3NhZ2V9PC9kaXY+XG4gICAgICAgICAgKSA6IChcbiAgICAgICAgICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgICAgICAgICAge2RhdGEucG9zdHMubWFwKChwb3N0KSA9PiAoXG4gICAgICAgICAgICAgICAgPENvbW11bml0eVBvc3RcbiAgICAgICAgICAgICAgICAgIHV1aWQ9e3Bvc3QudXVpZH1cbiAgICAgICAgICAgICAgICAgIHRpdGxlPXtwb3N0LnRpdGxlfVxuICAgICAgICAgICAgICAgICAgYm9keT17cG9zdC5ib2R5fVxuICAgICAgICAgICAgICAgICAgdXNlcm5hbWU9e3Bvc3QudXNlci51c2VybmFtZX1cbiAgICAgICAgICAgICAgICAgIGtleT17cG9zdC51dWlkfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGFuZGxlcnNcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjdXJyZW50LXBhZ2VcIj5DdXJyZW50IFBhZ2U6IHtwYWdlfTwvcD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRQYWdlKChvbGQpID0+IE1hdGgubWF4KG9sZCAtIDEsIDApKX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtwYWdlID09PSAxfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFByZXZpb3VzIFBhZ2VcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcmV2aW91c0RhdGEgJiYgZGF0YS5oYXNNb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UGFnZSgob2xkKSA9PiBvbGQgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1ByZXZpb3VzRGF0YSB8fCAhZGF0YS5oYXNNb3JlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIE5leHQgUGFnZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxBc2lkZSBib3JkZXJTaWRlPXtcImxlZnRcIn0gLz5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5jb21tdW5pdHktcG9zdC1oZWFkZXItY29udGFpbmVyIHtcbiAgICAgICAgICBoZWlnaHQ6IDE0MHB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y3NzLmhlYWRlckJhY2tncm91bmR9O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlci10aXRsZSxcbiAgICAgICAgLmhlYWRlci1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb21tdW5pdHktcG9zdC1wYWdlLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0cy1jb250YWluZXIge1xuICAgICAgICAgIHdpZHRoOiA4MCU7XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNlcnZlclNpZGVQcm9wczogR2V0U2VydmVyU2lkZVByb3BzID0gYXN5bmMgKGNvbnRleHQpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBwcm9wczoge1xuICAgICAgY29tbXVuaXR5OiBjb250ZXh0LnBhcmFtcy5jb21tdW5pdHksXG4gICAgfSxcbiAgfTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IENvbW11bml0eVBvc3RQYWdlO1xuIl19 */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/pages/[community]/index.tsx */\")\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(CommunityPostPage, \"B8AHcuIhDtcfT64L9EclU84Jm5E=\", false, function () {\n  return [useQuery];\n});\n\n_c = CommunityPostPage;\nexport var __N_SSP = true;\nexport default CommunityPostPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CommunityPostPage\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/pages/[community]/index.tsx"],"names":["React","useState","useQuery","host","Aside","css","CommunityPost","CommunityPostPage","community","page","setPage","fetchPosts","fetch","res","json","data","keepPreviousData","cacheTime","isLoading","isError","error","isPreviousData","headerBackground","name","description","message","posts","map","post","uuid","title","body","user","username","old","Math","max","hasMore"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { GetServerSideProps } from \"next\";\n\nimport host from \"../../utils/host\";\nimport { CommunityPostsType } from \"../../utils/types/postType\";\nimport Aside from \"../../components/Aside\";\nimport * as css from \"../../utils/cssVariables\";\nimport CommunityPost from \"../../components/CommunityPost\";\n\ninterface Props {\n  community: string;\n}\n\nconst CommunityPostPage: React.FC<Props> = ({ community }) => {\n  const [page, setPage] = useState<number>(1);\n\n  const fetchPosts = async (page: number) => {\n    const res = await fetch(\n      `${host}/communities/${community}/posts?page=${page}&limit=10`\n    );\n    const data: CommunityPostsType = await res.json();\n    return data;\n  };\n\n  const { isLoading, isError, error, data, isPreviousData } = useQuery<\n    CommunityPostsType,\n    Error\n  >([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0,\n  });\n\n  return (\n    <React.Fragment>\n      <div className=\"community-post-header-container\">\n        <h1 className=\"header-title\">{data?.community.name}</h1>\n        <p className=\"header-description\">{data?.community.description}</p>\n      </div>\n      <div className=\"community-post-page-container\">\n        <div className=\"posts-container\">\n          {isLoading ? (\n            <div>Loading...</div>\n          ) : isError ? (\n            <div>{error.message}</div>\n          ) : (\n            <React.Fragment>\n              {data.posts.map((post) => (\n                <CommunityPost\n                  uuid={post.uuid}\n                  title={post.title}\n                  body={post.body}\n                  username={post.user.username}\n                  key={post.uuid}\n                />\n              ))}\n              <div className=\"page-handlers\">\n                <p className=\"current-page\">Current Page: {page}</p>\n                <button\n                  onClick={() => setPage((old) => Math.max(old - 1, 0))}\n                  disabled={page === 1}\n                >\n                  Previous Page\n                </button>\n                <button\n                  onClick={() => {\n                    if (!isPreviousData && data.hasMore) {\n                      setPage((old) => old + 1);\n                    }\n                  }}\n                  disabled={isPreviousData || !data.hasMore}\n                >\n                  Next Page\n                </button>\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n        <Aside borderSide={\"left\"} />\n      </div>\n\n      <style jsx>{`\n        .community-post-header-container {\n          height: 140px;\n          width: 100%;\n          background: ${css.headerBackground};\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .header-title,\n        .header-description {\n          width: 90%;\n          margin: 10px 0;\n        }\n\n        .community-post-page-container {\n          display: flex;\n          width: 100%;\n        }\n\n        .posts-container {\n          width: 80%;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport const getServerSideProps: GetServerSideProps = async (context) => {\n  return {\n    props: {\n      community: context.params.community,\n    },\n  };\n};\n\nexport default CommunityPostPage;\n"]},"metadata":{},"sourceType":"module"}
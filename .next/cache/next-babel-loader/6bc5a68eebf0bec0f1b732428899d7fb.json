{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityQuestion from \"./CommunityQuestion\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\nimport PageHandlers from \"./PageHandlers\";\n\nconst CommunityQuestions = ({\n  community\n}) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n\n  const fetchPosts = async page => {\n    const res = await fetch(`${host}/communities/${community}/posts?page=${page}&limit=20`);\n    const data = await res.json();\n    return data;\n  };\n\n  const {\n    isLoading,\n    isError,\n    error,\n    data,\n    isPreviousData\n  } = useQuery([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0\n  });\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }) : isError ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]),\n          children: error.message\n        }) : /*#__PURE__*/_jsxs(React.Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: _JSXStyle.dynamic([[\"4247878222\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.map(post => /*#__PURE__*/_jsx(CommunityQuestion, {\n              post: post\n            }, post.uuid))\n          }), /*#__PURE__*/_jsx(PageHandlers, {\n            page: page,\n            setPage: setPage,\n            isPreviousData: isPreviousData,\n            hasMore: data.hasMore,\n            width: 90\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Aside, {\n        borderSide: \"left\"\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"4247878222\",\n      dynamic: [css.headerBackground],\n      children: [`.community-post-header-container.__jsx-style-dynamic-selector{width:100%;background:${css.headerBackground};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`, \".header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;}\", \".header-title.__jsx-style-dynamic-selector{margin:20px 0;}\", \".header-description.__jsx-style-dynamic-selector{margin-bottom:20px;}\", \".community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}\", \".posts-container.__jsx-style-dynamic-selector{width:80%;}\", \".community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\"]\n    })]\n  });\n};\n\nexport default CommunityQuestions;","map":null,"metadata":{},"sourceType":"module"}
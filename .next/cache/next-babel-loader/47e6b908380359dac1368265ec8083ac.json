{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityPost from \"./CommunityPost\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\nconst CommunityPosts = ({\n  community\n}) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n\n  const fetchPosts = async page => {\n    const res = await fetch(`${host}/communities/${community}/posts?page=${page}&limit=2`);\n    const data = await res.json();\n    return data;\n  };\n\n  const {\n    isLoading,\n    isError,\n    error,\n    data,\n    isPreviousData\n  } = useQuery([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0\n  });\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this) : isError ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: error.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.sort((a, b) => {\n              const dateA = Date.parse(a.createdAt);\n              const dateB = Date.parse(b.createdAt);\n              return dateB > dateA ? 1 : -1;\n            }).map(post => /*#__PURE__*/_jsxDEV(CommunityPost, {\n              post: post\n            }, post.uuid, false, {\n              fileName: _jsxFileName,\n              lineNumber: 55,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"page-handlers\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"current-page\",\n              children: [\"Current Page: \", page]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setPage(old => Math.max(old - 1, 0)),\n              disabled: page === 1,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Previous Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (!isPreviousData && data.hasMore) {\n                  setPage(old => old + 1);\n                }\n              },\n              disabled: isPreviousData || !data.hasMore,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Next Page\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Aside, {\n        borderSide: \"left\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3461175424\",\n      dynamic: [css.headerBackground],\n      children: `.community-post-header-container.__jsx-style-dynamic-selector{height:140px;width:100%;background:${css.headerBackground};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;margin:10px 0;}.community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}.posts-container.__jsx-style-dynamic-selector{width:80%;}.community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}.page-handlers.__jsx-style-dynamic-selector{width:90%;margin:30px auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;}button.__jsx-style-dynamic-selector{height:70%;width:90px;margin:0 5px;font-size:0.6rem;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9Db21tdW5pdHlQb3N0cy50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0ZrQixBQUd3QixBQVdILEFBS0csQUFLSCxBQUlDLEFBT0QsQUFTQyxVQTdCRyxBQVVoQixBQVdtQixDQVBKLEFBZ0JGLEVBekNBLFNBMENFLEVBekMyQixBQVcxQyxHQXFCZSxRQVVJLGlCQUNuQixZQTFDZSxVQWNGLFdBQ2IsQUFTd0IsZ0JBUUcscUNBL0JILHlCQXdCSCxtQ0FRQSxrQkEvQkksd0NBd0J6QixtQ0FRYyxZQUNkLFlBaENxQiw2RkFDckIiLCJmaWxlIjoiL1VzZXJzL3NrdWxsY3V0dGVyL1dlYlN0b3JtUHJvamVjdHMvc3RhY2tvdmVyZmxvdy1jbG9uZS9mcm9udGVuZC9jb21wb25lbnRzL0NvbW11bml0eVBvc3RzLnRzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgdXNlUXVlcnkgfSBmcm9tIFwicmVhY3QtcXVlcnlcIjtcblxuaW1wb3J0IGhvc3QgZnJvbSBcIi4uL3V0aWxzL2hvc3RcIjtcbmltcG9ydCB7IENvbW11bml0eVBvc3RzVHlwZSB9IGZyb20gXCIuLi91dGlscy90eXBlcy9wb3N0VHlwZVwiO1xuaW1wb3J0IENvbW11bml0eVBvc3QgZnJvbSBcIi4vQ29tbXVuaXR5UG9zdFwiO1xuaW1wb3J0IEFzaWRlIGZyb20gXCIuL0FzaWRlXCI7XG5pbXBvcnQgKiBhcyBjc3MgZnJvbSBcIi4uL3V0aWxzL2Nzc1ZhcmlhYmxlc1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBjb21tdW5pdHk6IHN0cmluZztcbn1cblxuY29uc3QgQ29tbXVuaXR5UG9zdHM6IFJlYWN0LkZDPFByb3BzPiA9ICh7IGNvbW11bml0eSB9KSA9PiB7XG4gIGNvbnN0IFtwYWdlLCBzZXRQYWdlXSA9IHVzZVN0YXRlPG51bWJlcj4oMSk7XG5cbiAgY29uc3QgZmV0Y2hQb3N0cyA9IGFzeW5jIChwYWdlOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChcbiAgICAgIGAke2hvc3R9L2NvbW11bml0aWVzLyR7Y29tbXVuaXR5fS9wb3N0cz9wYWdlPSR7cGFnZX0mbGltaXQ9MmBcbiAgICApO1xuICAgIGNvbnN0IGRhdGE6IENvbW11bml0eVBvc3RzVHlwZSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH07XG5cbiAgY29uc3QgeyBpc0xvYWRpbmcsIGlzRXJyb3IsIGVycm9yLCBkYXRhLCBpc1ByZXZpb3VzRGF0YSB9ID0gdXNlUXVlcnk8XG4gICAgQ29tbXVuaXR5UG9zdHNUeXBlLFxuICAgIEVycm9yXG4gID4oW1wiY29tbXVuaXR5LXBvc3RzXCIsIHBhZ2VdLCAoKSA9PiBmZXRjaFBvc3RzKHBhZ2UpLCB7XG4gICAga2VlcFByZXZpb3VzRGF0YTogdHJ1ZSxcbiAgICBjYWNoZVRpbWU6IDAsXG4gIH0pO1xuXG4gIHJldHVybiAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb21tdW5pdHktcG9zdC1oZWFkZXItY29udGFpbmVyXCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9XCJoZWFkZXItdGl0bGVcIj57ZGF0YT8uY29tbXVuaXR5Lm5hbWV9PC9oMT5cbiAgICAgICAgPHAgY2xhc3NOYW1lPVwiaGVhZGVyLWRlc2NyaXB0aW9uXCI+e2RhdGE/LmNvbW11bml0eS5kZXNjcmlwdGlvbn08L3A+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbXVuaXR5LXBvc3QtcGFnZS1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3N0cy1jb250YWluZXJcIj5cbiAgICAgICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICAgICAgPGRpdj5Mb2FkaW5nLi4uPC9kaXY+XG4gICAgICAgICAgKSA6IGlzRXJyb3IgPyAoXG4gICAgICAgICAgICA8ZGl2PntlcnJvci5tZXNzYWdlfTwvZGl2PlxuICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICA8UmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY29tbXVuaXR5LXBvc3RzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgIHtkYXRhLnBvc3RzXG4gICAgICAgICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQSA9IERhdGUucGFyc2UoYS5jcmVhdGVkQXQpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRlQiA9IERhdGUucGFyc2UoYi5jcmVhdGVkQXQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUIgPiBkYXRlQSA/IDEgOiAtMTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAubWFwKChwb3N0KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxDb21tdW5pdHlQb3N0IHBvc3Q9e3Bvc3R9IGtleT17cG9zdC51dWlkfSAvPlxuICAgICAgICAgICAgICAgICAgKSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBhZ2UtaGFuZGxlcnNcIj5cbiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJjdXJyZW50LXBhZ2VcIj5DdXJyZW50IFBhZ2U6IHtwYWdlfTwvcD5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRQYWdlKChvbGQpID0+IE1hdGgubWF4KG9sZCAtIDEsIDApKX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtwYWdlID09PSAxfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIFByZXZpb3VzIFBhZ2VcbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNQcmV2aW91c0RhdGEgJiYgZGF0YS5oYXNNb3JlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgc2V0UGFnZSgob2xkKSA9PiBvbGQgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc1ByZXZpb3VzRGF0YSB8fCAhZGF0YS5oYXNNb3JlfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIE5leHQgUGFnZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvUmVhY3QuRnJhZ21lbnQ+XG4gICAgICAgICAgKX1cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxBc2lkZSBib3JkZXJTaWRlPXtcImxlZnRcIn0gLz5cbiAgICAgIDwvZGl2PlxuXG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5jb21tdW5pdHktcG9zdC1oZWFkZXItY29udGFpbmVyIHtcbiAgICAgICAgICBoZWlnaHQ6IDE0MHB4O1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgIGJhY2tncm91bmQ6ICR7Y3NzLmhlYWRlckJhY2tncm91bmR9O1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmhlYWRlci10aXRsZSxcbiAgICAgICAgLmhlYWRlci1kZXNjcmlwdGlvbiB7XG4gICAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgfVxuXG4gICAgICAgIC5jb21tdW5pdHktcG9zdC1wYWdlLWNvbnRhaW5lciB7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0cy1jb250YWluZXIge1xuICAgICAgICAgIHdpZHRoOiA4MCU7XG4gICAgICAgIH1cblxuICAgICAgICAuY29tbXVuaXR5LXBvc3RzLWNvbnRhaW5lciB7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIH1cblxuICAgICAgICAucGFnZS1oYW5kbGVycyB7XG4gICAgICAgICAgd2lkdGg6IDkwJTtcbiAgICAgICAgICBtYXJnaW46IDMwcHggYXV0bztcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBoZWlnaHQ6IDMwcHg7XG4gICAgICAgIH1cblxuICAgICAgICBidXR0b24ge1xuICAgICAgICAgIGhlaWdodDogNzAlO1xuICAgICAgICAgIHdpZHRoOiA5MHB4O1xuICAgICAgICAgIG1hcmdpbjogMCA1cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAwLjZyZW07XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgQ29tbXVuaXR5UG9zdHM7XG4iXX0= */\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx */`\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n};\n\nexport default CommunityPosts;","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/CommunityPosts.tsx"],"names":["React","useState","useQuery","host","CommunityPost","Aside","css","CommunityPosts","community","page","setPage","fetchPosts","res","fetch","data","json","isLoading","isError","error","isPreviousData","keepPreviousData","cacheTime","headerBackground","name","description","message","posts","sort","a","b","dateA","Date","parse","createdAt","dateB","map","post","uuid","old","Math","max","hasMore"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\n\nimport host from \"../utils/host\";\nimport { CommunityPostsType } from \"../utils/types/postType\";\nimport CommunityPost from \"./CommunityPost\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\ninterface Props {\n  community: string;\n}\n\nconst CommunityPosts: React.FC<Props> = ({ community }) => {\n  const [page, setPage] = useState<number>(1);\n\n  const fetchPosts = async (page: number) => {\n    const res = await fetch(\n      `${host}/communities/${community}/posts?page=${page}&limit=2`\n    );\n    const data: CommunityPostsType = await res.json();\n    return data;\n  };\n\n  const { isLoading, isError, error, data, isPreviousData } = useQuery<\n    CommunityPostsType,\n    Error\n  >([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0,\n  });\n\n  return (\n    <React.Fragment>\n      <div className=\"community-post-header-container\">\n        <h1 className=\"header-title\">{data?.community.name}</h1>\n        <p className=\"header-description\">{data?.community.description}</p>\n      </div>\n      <div className=\"community-post-page-container\">\n        <div className=\"posts-container\">\n          {isLoading ? (\n            <div>Loading...</div>\n          ) : isError ? (\n            <div>{error.message}</div>\n          ) : (\n            <React.Fragment>\n              <div className=\"community-posts-container\">\n                {data.posts\n                  .sort((a, b) => {\n                    const dateA = Date.parse(a.createdAt);\n                    const dateB = Date.parse(b.createdAt);\n                    return dateB > dateA ? 1 : -1;\n                  })\n                  .map((post) => (\n                    <CommunityPost post={post} key={post.uuid} />\n                  ))}\n              </div>\n              <div className=\"page-handlers\">\n                <p className=\"current-page\">Current Page: {page}</p>\n                <button\n                  onClick={() => setPage((old) => Math.max(old - 1, 0))}\n                  disabled={page === 1}\n                >\n                  Previous Page\n                </button>\n                <button\n                  onClick={() => {\n                    if (!isPreviousData && data.hasMore) {\n                      setPage((old) => old + 1);\n                    }\n                  }}\n                  disabled={isPreviousData || !data.hasMore}\n                >\n                  Next Page\n                </button>\n              </div>\n            </React.Fragment>\n          )}\n        </div>\n        <Aside borderSide={\"left\"} />\n      </div>\n\n      <style jsx>{`\n        .community-post-header-container {\n          height: 140px;\n          width: 100%;\n          background: ${css.headerBackground};\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n        }\n\n        .header-title,\n        .header-description {\n          width: 90%;\n          margin: 10px 0;\n        }\n\n        .community-post-page-container {\n          display: flex;\n          width: 100%;\n        }\n\n        .posts-container {\n          width: 80%;\n        }\n\n        .community-posts-container {\n          width: 100%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n        }\n\n        .page-handlers {\n          width: 90%;\n          margin: 30px auto;\n          display: flex;\n          justify-content: flex-end;\n          align-items: center;\n          height: 30px;\n        }\n\n        button {\n          height: 70%;\n          width: 90px;\n          margin: 0 5px;\n          font-size: 0.6rem;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default CommunityPosts;\n"]},"metadata":{},"sourceType":"module"}
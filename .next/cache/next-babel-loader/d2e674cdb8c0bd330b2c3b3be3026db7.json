{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortUp, faSortDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { useRouter } from \"next/router\";\nimport { getCookie, updateVote } from \"../utils/functions\";\nimport host from \"../utils/host\";\nimport { UserContext } from \"../context/UserContext\";\nimport AskedBy from \"./AskedBy\";\nimport Tag from \"./Tag\";\n\nvar Question = function Question(_ref) {\n  _s();\n\n  var _userContext$user;\n\n  var data = _ref.data;\n\n  var _useState = useState(data.votes),\n      votes = _useState[0],\n      setVotes = _useState[1];\n\n  var _useState2 = useState(\"grey\"),\n      upvoteColor = _useState2[0],\n      setUpvoteColor = _useState2[1];\n\n  var _useState3 = useState(\"grey\"),\n      downvoteColor = _useState3[0],\n      setDownvoteColor = _useState3[1];\n\n  var userContext = useContext(UserContext);\n  var router = useRouter();\n  var upvote = \"#ff4400\";\n  var downvote = \"#7193ff\";\n  var style = {\n    cursor: \"pointer\"\n  };\n  useEffect(function () {\n    if (userContext.user) {\n      fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote/status\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data2) {\n        if (data2.status) {\n          if (data2.type === \"upvote\") {\n            setUpvoteColor(upvote);\n          } else if (data2.type === \"downvote\") {\n            setDownvoteColor(downvote);\n          }\n        }\n      });\n    }\n  }, [userContext]);\n\n  var vote = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(voteType) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!userContext.user) {\n                _context.next = 10;\n                break;\n              }\n\n              if (!(userContext.user.uuid !== data.user.uuid)) {\n                _context.next = 7;\n                break;\n              }\n\n              fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote/status\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid\n                })\n              }).then(function (res) {\n                return res.json();\n              }).then(function (data2) {\n                return updateVote(data2, voteType, setVotes, setUpvoteColor, setDownvoteColor, votes, upvote, downvote);\n              });\n              _context.next = 5;\n              return fetch(\"\".concat(host, \"/posts/\").concat(data.uuid, \"/vote\"), {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(getCookie(\"token\"))\n                },\n                body: JSON.stringify({\n                  userUuid: userContext.user.uuid,\n                  voteType: voteType\n                })\n              });\n\n            case 5:\n              _context.next = 8;\n              break;\n\n            case 7:\n              alert(\"You can't vote on your own post!\");\n\n            case 8:\n              _context.next = 12;\n              break;\n\n            case 10:\n              _context.next = 12;\n              return router.push(\"/auth/signup\");\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function vote(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"jsx-2180099042\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"jsx-2180099042\" + \" \" + \"question-container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"jsx-2180099042\" + \" \" + \"main\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2180099042\" + \" \" + \"votes\",\n            children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSortUp,\n              color: upvoteColor,\n              style: style,\n              size: \"2x\",\n              onClick: function onClick() {\n                return vote(\"upvote\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                color: \"#c6c6c6\",\n                margin: \"-8px 0\"\n              },\n              className: \"jsx-2180099042\" + \" \" + \"vote-count\",\n              children: votes\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n              icon: faSortDown,\n              color: downvoteColor,\n              style: style,\n              size: \"2x\",\n              onClick: function onClick() {\n                return vote(\"downvote\");\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"jsx-2180099042\" + \" \" + \"main-right\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"jsx-2180099042\" + \" \" + \"post-body\",\n              children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n                className: \"preview\",\n                source: data.body,\n                plugins: [remarkGfm]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"jsx-2180099042\" + \" \" + \"post-body-btm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"jsx-2180099042\" + \" \" + \"communities-container\",\n                children: data.communities.map(function (community) {\n                  return /*#__PURE__*/_jsxDEV(Tag, {\n                    name: community.name\n                  }, community.name, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 139,\n                    columnNumber: 21\n                  }, _this);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(AskedBy, {\n                username: data.user.username,\n                createdAt: data.createdAt,\n                postUuid: data.user.uuid,\n                userUuid: userContext === null || userContext === void 0 ? void 0 : (_userContext$user = userContext.user) === null || _userContext$user === void 0 ? void 0 : _userContext$user.uuid\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"2180099042\",\n      children: \".question-container.jsx-2180099042{width:92%;margin:0 auto;}.main.jsx-2180099042{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:20px 0;}.votes.jsx-2180099042{width:5%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;margin:14px 20px;}.main-right.jsx-2180099042{width:95%;}.post-body-btm.jsx-2180099042{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9RdWVzdGlvbi50c3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBeUprQixBQUdxQixBQUtHLEFBS0osQUFTQyxBQUlHLFNBWkEsQ0FWQyxBQW1CaEIsY0FsQkEsa0RBSWdCLEFBa0JnQixTQVpSLEtBTHhCLHlFQU1xQiw0QkFZQSxpRUFYUSw0QkFZaEIsV0FDYixrRUFabUIsaUJBQ25CIiwiZmlsZSI6Ii9Vc2Vycy9za3VsbGN1dHRlci9XZWJTdG9ybVByb2plY3RzL3N0YWNrb3ZlcmZsb3ctY2xvbmUvZnJvbnRlbmQvY29tcG9uZW50cy9RdWVzdGlvbi50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCwgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFJlYWN0TWFya2Rvd24gZnJvbSBcInJlYWN0LW1hcmtkb3duXCI7XG5pbXBvcnQgcmVtYXJrR2ZtIGZyb20gXCJyZW1hcmstZ2ZtXCI7XG5pbXBvcnQgeyBGb250QXdlc29tZUljb24gfSBmcm9tIFwiQGZvcnRhd2Vzb21lL3JlYWN0LWZvbnRhd2Vzb21lXCI7XG5pbXBvcnQgeyBmYVNvcnRVcCwgZmFTb3J0RG93biB9IGZyb20gXCJAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnNcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L3JvdXRlclwiO1xuXG5pbXBvcnQgeyBRdWVzdGlvblR5cGUgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvaW5kaXZpZHVhbFF1ZXN0aW9uVHlwZVwiO1xuaW1wb3J0IHsgZ2V0Q29va2llLCB1cGRhdGVWb3RlIH0gZnJvbSBcIi4uL3V0aWxzL2Z1bmN0aW9uc1wiO1xuaW1wb3J0IHsgdm90ZVR5cGUgfSBmcm9tIFwiLi4vdXRpbHMvdHlwZXMvdm90ZVR5cGVcIjtcbmltcG9ydCBob3N0IGZyb20gXCIuLi91dGlscy9ob3N0XCI7XG5pbXBvcnQgeyBVc2VyQ29udGV4dCB9IGZyb20gXCIuLi9jb250ZXh0L1VzZXJDb250ZXh0XCI7XG5pbXBvcnQgQXNrZWRCeSBmcm9tIFwiLi9Bc2tlZEJ5XCI7XG5pbXBvcnQgVGFnIGZyb20gXCIuL1RhZ1wiO1xuXG5pbnRlcmZhY2UgUHJvcHMge1xuICBkYXRhOiBRdWVzdGlvblR5cGU7XG59XG5cbmNvbnN0IFF1ZXN0aW9uOiBSZWFjdC5GQzxQcm9wcz4gPSAoeyBkYXRhIH0pID0+IHtcbiAgY29uc3QgW3ZvdGVzLCBzZXRWb3Rlc10gPSB1c2VTdGF0ZTxudW1iZXI+KGRhdGEudm90ZXMpO1xuICBjb25zdCBbdXB2b3RlQ29sb3IsIHNldFVwdm90ZUNvbG9yXSA9IHVzZVN0YXRlPHN0cmluZz4oXCJncmV5XCIpO1xuICBjb25zdCBbZG93bnZvdGVDb2xvciwgc2V0RG93bnZvdGVDb2xvcl0gPSB1c2VTdGF0ZTxzdHJpbmc+KFwiZ3JleVwiKTtcblxuICBjb25zdCB1c2VyQ29udGV4dCA9IHVzZUNvbnRleHQoVXNlckNvbnRleHQpO1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcblxuICBjb25zdCB1cHZvdGUgPSBcIiNmZjQ0MDBcIjtcbiAgY29uc3QgZG93bnZvdGUgPSBcIiM3MTkzZmZcIjtcblxuICBjb25zdCBzdHlsZSA9IHsgY3Vyc29yOiBcInBvaW50ZXJcIiB9O1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHVzZXJDb250ZXh0LnVzZXIpIHtcbiAgICAgIGZldGNoKGAke2hvc3R9L3Bvc3RzLyR7ZGF0YS51dWlkfS92b3RlL3N0YXR1c2AsIHtcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgdXNlclV1aWQ6IHVzZXJDb250ZXh0LnVzZXIudXVpZCxcbiAgICAgICAgfSksXG4gICAgICB9KVxuICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAudGhlbigoZGF0YTI6IHZvdGVUeXBlKSA9PiB7XG4gICAgICAgICAgaWYgKGRhdGEyLnN0YXR1cykge1xuICAgICAgICAgICAgaWYgKGRhdGEyLnR5cGUgPT09IFwidXB2b3RlXCIpIHtcbiAgICAgICAgICAgICAgc2V0VXB2b3RlQ29sb3IodXB2b3RlKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0YTIudHlwZSA9PT0gXCJkb3dudm90ZVwiKSB7XG4gICAgICAgICAgICAgIHNldERvd252b3RlQ29sb3IoZG93bnZvdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9LCBbdXNlckNvbnRleHRdKTtcblxuICBjb25zdCB2b3RlID0gYXN5bmMgKHZvdGVUeXBlOiBcInVwdm90ZVwiIHwgXCJkb3dudm90ZVwiKSA9PiB7XG4gICAgaWYgKHVzZXJDb250ZXh0LnVzZXIpIHtcbiAgICAgIGlmICh1c2VyQ29udGV4dC51c2VyLnV1aWQgIT09IGRhdGEudXNlci51dWlkKSB7XG4gICAgICAgIGZldGNoKGAke2hvc3R9L3Bvc3RzLyR7ZGF0YS51dWlkfS92b3RlL3N0YXR1c2AsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgdXNlclV1aWQ6IHVzZXJDb250ZXh0LnVzZXIudXVpZCxcbiAgICAgICAgICB9KSxcbiAgICAgICAgfSlcbiAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgIC50aGVuKChkYXRhMjogdm90ZVR5cGUpID0+XG4gICAgICAgICAgICB1cGRhdGVWb3RlKFxuICAgICAgICAgICAgICBkYXRhMixcbiAgICAgICAgICAgICAgdm90ZVR5cGUsXG4gICAgICAgICAgICAgIHNldFZvdGVzLFxuICAgICAgICAgICAgICBzZXRVcHZvdGVDb2xvcixcbiAgICAgICAgICAgICAgc2V0RG93bnZvdGVDb2xvcixcbiAgICAgICAgICAgICAgdm90ZXMsXG4gICAgICAgICAgICAgIHVwdm90ZSxcbiAgICAgICAgICAgICAgZG93bnZvdGVcbiAgICAgICAgICAgIClcbiAgICAgICAgICApO1xuICAgICAgICBhd2FpdCBmZXRjaChgJHtob3N0fS9wb3N0cy8ke2RhdGEudXVpZH0vdm90ZWAsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2dldENvb2tpZShcInRva2VuXCIpfWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICB1c2VyVXVpZDogdXNlckNvbnRleHQudXNlci51dWlkLFxuICAgICAgICAgICAgdm90ZVR5cGU6IHZvdGVUeXBlLFxuICAgICAgICAgIH0pLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsZXJ0KFwiWW91IGNhbid0IHZvdGUgb24geW91ciBvd24gcG9zdCFcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHJvdXRlci5wdXNoKFwiL2F1dGgvc2lnbnVwXCIpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxSZWFjdC5GcmFnbWVudD5cbiAgICAgIDxtYWluPlxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInF1ZXN0aW9uLWNvbnRhaW5lclwiPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFpblwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJ2b3Rlc1wiPlxuICAgICAgICAgICAgICA8Rm9udEF3ZXNvbWVJY29uXG4gICAgICAgICAgICAgICAgaWNvbj17ZmFTb3J0VXB9XG4gICAgICAgICAgICAgICAgY29sb3I9e3Vwdm90ZUNvbG9yfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICAgICAgICBzaXplPXtcIjJ4XCJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdm90ZShcInVwdm90ZVwiKX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgPHBcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJ2b3RlLWNvdW50XCJcbiAgICAgICAgICAgICAgICBzdHlsZT17eyBjb2xvcjogXCIjYzZjNmM2XCIsIG1hcmdpbjogXCItOHB4IDBcIiB9fVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge3ZvdGVzfVxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIDxGb250QXdlc29tZUljb25cbiAgICAgICAgICAgICAgICBpY29uPXtmYVNvcnREb3dufVxuICAgICAgICAgICAgICAgIGNvbG9yPXtkb3dudm90ZUNvbG9yfVxuICAgICAgICAgICAgICAgIHN0eWxlPXtzdHlsZX1cbiAgICAgICAgICAgICAgICBzaXplPXtcIjJ4XCJ9XG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gdm90ZShcImRvd252b3RlXCIpfVxuICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1haW4tcmlnaHRcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJwb3N0LWJvZHlcIj5cbiAgICAgICAgICAgICAgICA8UmVhY3RNYXJrZG93blxuICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwicHJldmlld1wiXG4gICAgICAgICAgICAgICAgICBzb3VyY2U9e2RhdGEuYm9keX1cbiAgICAgICAgICAgICAgICAgIHBsdWdpbnM9e1tyZW1hcmtHZm1dfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInBvc3QtYm9keS1idG1cIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbW11bml0aWVzLWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAge2RhdGEuY29tbXVuaXRpZXMubWFwKChjb21tdW5pdHkpID0+IChcbiAgICAgICAgICAgICAgICAgICAgPFRhZyBuYW1lPXtjb21tdW5pdHkubmFtZX0ga2V5PXtjb21tdW5pdHkubmFtZX0gLz5cbiAgICAgICAgICAgICAgICAgICkpfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxBc2tlZEJ5XG4gICAgICAgICAgICAgICAgICB1c2VybmFtZT17ZGF0YS51c2VyLnVzZXJuYW1lfVxuICAgICAgICAgICAgICAgICAgY3JlYXRlZEF0PXtkYXRhLmNyZWF0ZWRBdH1cbiAgICAgICAgICAgICAgICAgIHBvc3RVdWlkPXtkYXRhLnVzZXIudXVpZH1cbiAgICAgICAgICAgICAgICAgIHVzZXJVdWlkPXt1c2VyQ29udGV4dD8udXNlcj8udXVpZH1cbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbWFpbj5cblxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucXVlc3Rpb24tY29udGFpbmVyIHtcbiAgICAgICAgICB3aWR0aDogOTIlO1xuICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICB9XG5cbiAgICAgICAgLm1haW4ge1xuICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgIH1cblxuICAgICAgICAudm90ZXMge1xuICAgICAgICAgIHdpZHRoOiA1JTtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICAgICAgbWFyZ2luOiAxNHB4IDIwcHg7XG4gICAgICAgIH1cblxuICAgICAgICAubWFpbi1yaWdodCB7XG4gICAgICAgICAgd2lkdGg6IDk1JTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5wb3N0LWJvZHktYnRtIHtcbiAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9SZWFjdC5GcmFnbWVudD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFF1ZXN0aW9uO1xuIl19 */\\n/*@ sourceURL=/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx */\"\n    }, void 0, false, void 0, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(Question, \"I6vaFkRatAuPG4G+CwhBMxjQvOo=\", false, function () {\n  return [useRouter];\n});\n\n_c = Question;\nexport default Question;\n\nvar _c;\n\n$RefreshReg$(_c, \"Question\");","map":{"version":3,"sources":["/Users/skullcutter/WebStormProjects/stackoverflow-clone/frontend/components/Question.tsx"],"names":["React","useContext","useState","useEffect","ReactMarkdown","remarkGfm","FontAwesomeIcon","faSortUp","faSortDown","useRouter","getCookie","updateVote","host","UserContext","AskedBy","Tag","Question","data","votes","setVotes","upvoteColor","setUpvoteColor","downvoteColor","setDownvoteColor","userContext","router","upvote","downvote","style","cursor","user","fetch","uuid","method","headers","body","JSON","stringify","userUuid","then","res","json","data2","status","type","vote","voteType","Authorization","alert","push","color","margin","communities","map","community","name","username","createdAt"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faSortUp, faSortDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { useRouter } from \"next/router\";\n\nimport { QuestionType } from \"../utils/types/individualQuestionType\";\nimport { getCookie, updateVote } from \"../utils/functions\";\nimport { voteType } from \"../utils/types/voteType\";\nimport host from \"../utils/host\";\nimport { UserContext } from \"../context/UserContext\";\nimport AskedBy from \"./AskedBy\";\nimport Tag from \"./Tag\";\n\ninterface Props {\n  data: QuestionType;\n}\n\nconst Question: React.FC<Props> = ({ data }) => {\n  const [votes, setVotes] = useState<number>(data.votes);\n  const [upvoteColor, setUpvoteColor] = useState<string>(\"grey\");\n  const [downvoteColor, setDownvoteColor] = useState<string>(\"grey\");\n\n  const userContext = useContext(UserContext);\n  const router = useRouter();\n\n  const upvote = \"#ff4400\";\n  const downvote = \"#7193ff\";\n\n  const style = { cursor: \"pointer\" };\n\n  useEffect(() => {\n    if (userContext.user) {\n      fetch(`${host}/posts/${data.uuid}/vote/status`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          userUuid: userContext.user.uuid,\n        }),\n      })\n        .then((res) => res.json())\n        .then((data2: voteType) => {\n          if (data2.status) {\n            if (data2.type === \"upvote\") {\n              setUpvoteColor(upvote);\n            } else if (data2.type === \"downvote\") {\n              setDownvoteColor(downvote);\n            }\n          }\n        });\n    }\n  }, [userContext]);\n\n  const vote = async (voteType: \"upvote\" | \"downvote\") => {\n    if (userContext.user) {\n      if (userContext.user.uuid !== data.user.uuid) {\n        fetch(`${host}/posts/${data.uuid}/vote/status`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            userUuid: userContext.user.uuid,\n          }),\n        })\n          .then((res) => res.json())\n          .then((data2: voteType) =>\n            updateVote(\n              data2,\n              voteType,\n              setVotes,\n              setUpvoteColor,\n              setDownvoteColor,\n              votes,\n              upvote,\n              downvote\n            )\n          );\n        await fetch(`${host}/posts/${data.uuid}/vote`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${getCookie(\"token\")}`,\n          },\n          body: JSON.stringify({\n            userUuid: userContext.user.uuid,\n            voteType: voteType,\n          }),\n        });\n      } else {\n        alert(\"You can't vote on your own post!\");\n      }\n    } else {\n      await router.push(\"/auth/signup\");\n    }\n  };\n\n  return (\n    <React.Fragment>\n      <main>\n        <div className=\"question-container\">\n          <div className=\"main\">\n            <div className=\"votes\">\n              <FontAwesomeIcon\n                icon={faSortUp}\n                color={upvoteColor}\n                style={style}\n                size={\"2x\"}\n                onClick={() => vote(\"upvote\")}\n              />\n              <p\n                className=\"vote-count\"\n                style={{ color: \"#c6c6c6\", margin: \"-8px 0\" }}\n              >\n                {votes}\n              </p>\n              <FontAwesomeIcon\n                icon={faSortDown}\n                color={downvoteColor}\n                style={style}\n                size={\"2x\"}\n                onClick={() => vote(\"downvote\")}\n              />\n            </div>\n            <div className=\"main-right\">\n              <div className=\"post-body\">\n                <ReactMarkdown\n                  className=\"preview\"\n                  source={data.body}\n                  plugins={[remarkGfm]}\n                />\n              </div>\n              <div className=\"post-body-btm\">\n                <div className=\"communities-container\">\n                  {data.communities.map((community) => (\n                    <Tag name={community.name} key={community.name} />\n                  ))}\n                </div>\n                <AskedBy\n                  username={data.user.username}\n                  createdAt={data.createdAt}\n                  postUuid={data.user.uuid}\n                  userUuid={userContext?.user?.uuid}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </main>\n\n      <style jsx>{`\n        .question-container {\n          width: 92%;\n          margin: 0 auto;\n        }\n\n        .main {\n          display: flex;\n          margin: 20px 0;\n        }\n\n        .votes {\n          width: 5%;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: flex-start;\n          margin: 14px 20px;\n        }\n\n        .main-right {\n          width: 95%;\n        }\n\n        .post-body-btm {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          width: 100%;\n        }\n      `}</style>\n    </React.Fragment>\n  );\n};\n\nexport default Question;\n"]},"metadata":{},"sourceType":"module"}
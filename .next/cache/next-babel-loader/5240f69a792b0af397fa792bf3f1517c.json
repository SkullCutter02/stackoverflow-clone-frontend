{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useRef, useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport * as css from \"../../../../utils/cssVariables\";\nimport host from \"../../../../utils/host\";\nimport Spinner from \"../../../../components/Spinner\";\n\nconst ResetPasswordPage = () => {\n  const {\n    0: isChangedPassword,\n    1: setIsChangedPassword\n  } = useState(false);\n  const {\n    0: text,\n    1: setText\n  } = useState(\"Change password\");\n  const router = useRouter();\n  const {\n    uuid\n  } = router.query;\n  const passwordRef = useRef(null);\n  const confirmPasswordRef = useRef(null);\n  const errMsgRef = useRef(null);\n  const spinnerRef = useRef(null);\n\n  const changePassword = e => {\n    e.preventDefault();\n\n    if (passwordRef.current.value === confirmPasswordRef.current.value) {\n      setText(\"\");\n      spinnerRef.current.style.display = \"block\";\n      fetch(`${host}/auth/email/password/reset`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          newPassword: passwordRef.current.value,\n          token: uuid\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.errors) {\n          errMsgRef.current.innerText = data.errors[0].msg;\n          setText(\"Change password\");\n          spinnerRef.current.style.display = \"none\";\n        } else if (data.msg) {\n          errMsgRef.current.innerText = data.msg;\n          setText(\"Change password\");\n          spinnerRef.current.style.display = \"none\";\n        } else {\n          setIsChangedPassword(true);\n        }\n      }).catch(err => console.log(err));\n    } else {\n      errMsgRef.current.innerText = \"Passwords don't match\";\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsx(\"main\", {\n      className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]),\n      children: !isChangedPassword ? /*#__PURE__*/_jsxs(\"form\", {\n        onSubmit: changePassword,\n        className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]) + \" \" + \"input-container\",\n        children: [/*#__PURE__*/_jsx(\"h2\", {\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]),\n          children: \"Reset Password:\"\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"password\",\n          ref: passwordRef,\n          placeholder: \"Enter new password:\",\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]])\n        }), /*#__PURE__*/_jsx(\"input\", {\n          type: \"password\",\n          ref: confirmPasswordRef,\n          placeholder: \"Confirm password:\",\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]])\n        }), /*#__PURE__*/_jsxs(\"button\", {\n          type: \"submit\",\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]),\n          children: [text, /*#__PURE__*/_jsx(Spinner, {\n            spinner: spinnerRef\n          })]\n        }), /*#__PURE__*/_jsx(\"p\", {\n          ref: errMsgRef,\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]) + \" \" + \"err-msg\"\n        })]\n      }) : /*#__PURE__*/_jsxs(\"div\", {\n        className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]) + \" \" + \"changed-password-container\",\n        children: [/*#__PURE__*/_jsx(\"h1\", {\n          className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]) + \" \" + \"header\",\n          children: \"Password Changed!\"\n        }), /*#__PURE__*/_jsx(Link, {\n          href: \"/auth/login\",\n          children: /*#__PURE__*/_jsx(\"p\", {\n            className: _JSXStyle.dynamic([[\"365882503\", [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover]]]) + \" \" + \"return\",\n            children: \"Return to Login page\"\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"365882503\",\n      dynamic: [css.inputBorder, css.inputBackground, css.mainButton, css.mainButtonHover],\n      children: [\"main.__jsx-style-dynamic-selector{width:100%;height:80vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \".input-container.__jsx-style-dynamic-selector{width:30%;height:55%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", `input.__jsx-style-dynamic-selector{border:1px solid ${css.inputBorder};background:${css.inputBackground};color:#fff;min-height:40px;width:100%;text-indent:15px;font-size:0.8rem;margin:10px 0;}`, `button.__jsx-style-dynamic-selector{border:none;background:${css.mainButton};color:white;width:150px;min-height:30px;border-radius:4px;cursor:pointer;margin:20px 0;}`, `button.__jsx-style-dynamic-selector:hover{background:${css.mainButtonHover};}`, \".err-msg.__jsx-style-dynamic-selector{color:#ff0000;text-align:center;width:90%;}\", \"h2.__jsx-style-dynamic-selector{margin:20px 0;}\", \".changed-password-container.__jsx-style-dynamic-selector{width:40%;height:60%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \".header.__jsx-style-dynamic-selector,.return.__jsx-style-dynamic-selector{margin:10px 0;}\", \".return.__jsx-style-dynamic-selector{-webkit-text-decoration:underline;text-decoration:underline;color:#929292;font-size:0.9rem;cursor:pointer;}\"]\n    })]\n  });\n};\n\nexport default ResetPasswordPage;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React, { useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport host from \"../utils/host\";\nimport CommunityQuestion from \"./CommunityQuestion\";\nimport Aside from \"./Aside\";\nimport * as css from \"../utils/cssVariables\";\n\nconst CommunityQuestions = ({\n  community\n}) => {\n  const {\n    0: page,\n    1: setPage\n  } = useState(1);\n\n  const fetchPosts = async page => {\n    const res = await fetch(`${host}/communities/${community}/posts?page=${page}&limit=10`);\n    const data = await res.json();\n    return data;\n  };\n\n  const {\n    isLoading,\n    isError,\n    error,\n    data,\n    isPreviousData\n  } = useQuery([\"community-posts\", page], () => fetchPosts(page), {\n    keepPreviousData: true,\n    cacheTime: 0\n  });\n  return /*#__PURE__*/_jsxs(React.Fragment, {\n    children: [/*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-header-container\",\n      children: [/*#__PURE__*/_jsx(\"h1\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-title\",\n        children: data === null || data === void 0 ? void 0 : data.community.name\n      }), /*#__PURE__*/_jsx(\"p\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"header-description\",\n        children: data === null || data === void 0 ? void 0 : data.community.description\n      })]\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-post-page-container\",\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"posts-container\",\n        children: isLoading ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: \"Loading...\"\n        }) : isError ? /*#__PURE__*/_jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n          children: error.message\n        }) : /*#__PURE__*/_jsxs(React.Fragment, {\n          children: [/*#__PURE__*/_jsx(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"community-posts-container\",\n            children: data.posts.sort((a, b) => {\n              const dateA = Date.parse(a.createdAt);\n              const dateB = Date.parse(b.createdAt);\n              return dateB > dateA ? 1 : -1;\n            }).map(post => /*#__PURE__*/_jsx(CommunityQuestion, {\n              post: post\n            }, post.uuid))\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"page-handlers\",\n            children: [/*#__PURE__*/_jsxs(\"p\", {\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]) + \" \" + \"current-page\",\n              children: [\"Current Page: \", page]\n            }), /*#__PURE__*/_jsx(\"button\", {\n              onClick: () => {\n                setPage(old => Math.max(old - 1, 0));\n                window.scrollTo(0, -500);\n              },\n              disabled: page === 1,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Previous Page\"\n            }), /*#__PURE__*/_jsx(\"button\", {\n              onClick: () => {\n                if (!isPreviousData && data.hasMore) {\n                  setPage(old => old + 1);\n                  window.scrollTo(0, -500);\n                }\n              },\n              disabled: isPreviousData || !data.hasMore,\n              className: _JSXStyle.dynamic([[\"3461175424\", [css.headerBackground]]]),\n              children: \"Next Page\"\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Aside, {\n        borderSide: \"left\"\n      })]\n    }), /*#__PURE__*/_jsx(_JSXStyle, {\n      id: \"3461175424\",\n      dynamic: [css.headerBackground],\n      children: [`.community-post-header-container.__jsx-style-dynamic-selector{height:140px;width:100%;background:${css.headerBackground};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}`, \".header-title.__jsx-style-dynamic-selector,.header-description.__jsx-style-dynamic-selector{width:90%;margin:10px 0;}\", \".community-post-page-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;}\", \".posts-container.__jsx-style-dynamic-selector{width:80%;}\", \".community-posts-container.__jsx-style-dynamic-selector{width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\", \".page-handlers.__jsx-style-dynamic-selector{width:90%;margin:30px auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:30px;}\", \"button.__jsx-style-dynamic-selector{height:70%;width:90px;margin:0 5px;font-size:0.6rem;}\"]\n    })]\n  });\n};\n\nexport default CommunityQuestions;","map":null,"metadata":{},"sourceType":"module"}
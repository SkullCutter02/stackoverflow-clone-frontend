{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[15],{L8ax:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return i})),n.d(t,\"b\",(function(){return o}));var s=n(\"nKUr\"),a=n(\"q1tI\"),c=n(\"ZAWl\"),r=n(\"9rbA\"),i=Object(a.createContext)(null),o=function(e){var t=Object(a.useState)(),n=t[0],o=t[1];return Object(a.useEffect)((function(){var e=Object(r.a)(\"token\");\"\"!==e&&fetch(\"\".concat(c.a,\"/users/\").concat(JSON.parse(atob(e.split(\".\")[1])).uuid)).then((function(e){return e.json()})).then((function(e){return o(e)})).catch((function(e){return console.log(e)}))}),[]),Object(s.jsx)(i.Provider,{value:{user:n,setState:o},children:e.children})}},reNV:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/admin\",function(){return n(\"zP5P\")}])},uHeH:function(e,t,n){\"use strict\";var s=n(\"nKUr\"),a=n(\"MX0m\"),c=n.n(a),r=n(\"q1tI\"),i=n.n(r);t.a=function(e){var t=e.page,n=e.setPage,a=e.isPreviousData,r=e.hasMore,o=e.width,u=e.flex;return Object(s.jsxs)(i.a.Fragment,{children:[Object(s.jsxs)(\"div\",{className:c.a.dynamic([[\"2054357036\",[o,void 0===u?\"flex-end\":u]]])+\" page-handlers\",children:[Object(s.jsxs)(\"p\",{className:c.a.dynamic([[\"2054357036\",[o,void 0===u?\"flex-end\":u]]])+\" current-page\",children:[\"Current Page: \",t]}),Object(s.jsx)(\"button\",{onClick:function(){n((function(e){return Math.max(e-1,0)})),window.scrollTo(0,-500)},disabled:1===t,className:c.a.dynamic([[\"2054357036\",[o,void 0===u?\"flex-end\":u]]]),children:\"Previous Page\"}),Object(s.jsx)(\"button\",{onClick:function(){!a&&r&&(n((function(e){return e+1})),window.scrollTo(0,-500))},disabled:a||!r,className:c.a.dynamic([[\"2054357036\",[o,void 0===u?\"flex-end\":u]]]),children:\"Next Page\"})]}),Object(s.jsx)(c.a,{id:\"2054357036\",dynamic:[o,void 0===u?\"flex-end\":u],children:[\".page-handlers.__jsx-style-dynamic-selector{width:\".concat(o,\"%;margin:20px auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:\").concat(void 0===u?\"flex-end\":u,\";-webkit-justify-content:\").concat(void 0===u?\"flex-end\":u,\";-ms-flex-pack:\").concat(void 0===u?\"flex-end\":u,\";justify-content:\").concat(void 0===u?\"flex-end\":u,\";}\"),\"button.__jsx-style-dynamic-selector{width:90px;margin:0 5px;font-size:0.6rem;}\"]})]})}},zP5P:function(e,t,n){\"use strict\";n.r(t);var s=n(\"o0o1\"),a=n.n(s),c=n(\"HaE+\"),r=n(\"nKUr\"),i=n(\"MX0m\"),o=n.n(i),u=n(\"q1tI\"),l=n.n(u),d=n(\"+QN0\"),j=n(\"Uvq/\"),x=n(\"uHeH\"),f=n(\"ZAWl\"),b=n(\"L8ax\"),m=n(\"9rbA\");t.default=function(){var e=Object(u.useState)(1),t=e[0],n=e[1],s=Object(u.useContext)(b.a),i=Object(d.b)(),p=Object(u.useRef)(null),h=Object(u.useRef)(null),v=function(){var e=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(\"\".concat(f.a,\"/requests?page=\").concat(t,\"&limit=20\"));case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt(\"return\",e.sent);case 6:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=Object(j.a)([\"requests\",t],(function(){return v(t)}),{keepPreviousData:!0}),w=O.isLoading,y=O.isError,k=O.error,N=O.data,g=O.isPreviousData,P=function(){var e=Object(c.a)(a.a.mark((function e(n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(\"\".concat(f.a,\"/requests/\").concat(n),{method:\"DELETE\",headers:{Authorization:\"Bearer \".concat(Object(m.a)(\"token\"))}});case 2:return e.next=4,i.prefetchQuery([\"requests\",t]);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return void 0===s.user?Object(r.jsx)(\"div\",{}):Object(r.jsxs)(l.a.Fragment,{children:[\"god\"===s.user.role?Object(r.jsx)(\"div\",{className:\"jsx-2918500353 admin-area-container\",children:w?Object(r.jsx)(\"div\",{className:\"jsx-2918500353\",children:\"Loading...\"}):y?Object(r.jsx)(\"div\",{className:\"jsx-2918500353\",children:k.message}):Object(r.jsxs)(\"div\",{className:\"jsx-2918500353 admin-area\",children:[Object(r.jsxs)(\"div\",{className:\"jsx-2918500353 requests-container\",children:[N.requests.map((function(e){return Object(r.jsxs)(\"div\",{className:\"jsx-2918500353\",children:[Object(r.jsx)(\"p\",{className:\"jsx-2918500353\",children:e.name}),Object(r.jsx)(\"a\",{href:e.link,style:{color:\"white\"},className:\"jsx-2918500353\",children:e.link}),Object(r.jsx)(\"button\",{onClick:function(){return P(e.uuid)},className:\"jsx-2918500353\",children:\"Remove\"})]})})),Object(r.jsx)(x.a,{page:t,setPage:n,isPreviousData:g,hasMore:N.hasMore,width:100,flex:\"flex-start\"})]}),Object(r.jsxs)(\"form\",{onSubmit:function(e){e.preventDefault(),s.user&&fetch(\"\".concat(f.a,\"/communities\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:p.current.value,description:h.current.value,uuid:s.user.uuid})}).then((function(e){return e.json()})).then((function(e){e.msg?console.log(e.msg):(p.current.value=\"\",h.current.value=\"\")}))},className:\"jsx-2918500353\",children:[Object(r.jsx)(\"input\",{type:\"text\",placeholder:\"Name: \",ref:p,required:!0,className:\"jsx-2918500353\"}),Object(r.jsx)(\"textarea\",{cols:30,rows:10,placeholder:\"Description: \",ref:h,required:!0,className:\"jsx-2918500353\"}),Object(r.jsx)(\"button\",{type:\"submit\",className:\"jsx-2918500353\",children:\"Submit\"})]})]})}):Object(r.jsx)(\"div\",{className:\"jsx-2918500353 rickroll\",children:Object(r.jsx)(\"img\",{src:\"/rick.gif\",alt:\"rick\",className:\"jsx-2918500353\"})}),Object(r.jsx)(o.a,{id:\"2918500353\",children:[\".rickroll.jsx-2918500353{margin:100px auto;}\",\".rickroll.jsx-2918500353 img.jsx-2918500353{display:block;margin:0 auto;}\",\".admin-area.jsx-2918500353{margin:200px 200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}\",\"form.jsx-2918500353 input.jsx-2918500353,form.jsx-2918500353 textarea.jsx-2918500353{display:block;resize:none;}\"]})]})}}},[[\"reNV\",0,2,1,3,5]]]);","map":{"version":3,"sources":["static/chunks/pages/admin-518fbfd8733cad83cffd.js"],"names":["_N_E","window","push","L8ax","module","__webpack_exports__","__webpack_require__","d","UserContext","UserContextProvider","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_1__","_utils_host__WEBPACK_IMPORTED_MODULE_2__","_utils_functions__WEBPACK_IMPORTED_MODULE_3__","Object","props","_useState","state","setState","token","fetch","concat","JSON","parse","atob","split","uuid","then","res","json","data","err","console","log","Provider","value","user","children","reNV","exports","__NEXT_P","uHeH","styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__","styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default","n","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","_ref","page","setPage","isPreviousData","hasMore","width","flex","a","Fragment","className","dynamic","undefined","onClick","old","Math","max","scrollTo","disabled","id","zP5P","r","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__","styled_jsx_style__WEBPACK_IMPORTED_MODULE_3__","styled_jsx_style__WEBPACK_IMPORTED_MODULE_3___default","react__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_4___default","react_query__WEBPACK_IMPORTED_MODULE_5__","react_query__WEBPACK_IMPORTED_MODULE_6__","_components_PageHandlers__WEBPACK_IMPORTED_MODULE_7__","_utils_host__WEBPACK_IMPORTED_MODULE_8__","_context_UserContext__WEBPACK_IMPORTED_MODULE_9__","_utils_functions__WEBPACK_IMPORTED_MODULE_10__","userContext","queryClient","nameRef","descriptionRef","fetchRequests","mark","_callee","wrap","_context","prev","next","sent","abrupt","stop","_x","apply","this","arguments","_useQuery","keepPreviousData","isLoading","isError","error","deleteRequest","_ref2","_callee2","_context2","method","headers","Authorization","prefetchQuery","_x2","role","message","requests","map","request","name","href","link","style","color","onSubmit","e","preventDefault","Content-Type","body","stringify","current","description","msg","type","placeholder","ref","required","cols","rows","src","alt"],"mappings":"AAAAA,MACCC,OAAyB,iBAAIA,OAAyB,kBAAK,IAAIC,KAAK,CAAC,CAAC,IAAI,CAErEC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,aAC+BA,EAAoBC,EAAEF,EAAqB,KAAK,WAAa,OAAOG,KACpEF,EAAoBC,EAAEF,EAAqB,KAAK,WAAa,OAAOI,KAC9E,IAAIC,EAAiDJ,EAAoB,QAErEK,EAAqCL,EAAoB,QAEzDM,EAA2CN,EAAoB,QAC/DO,EAAgDP,EAAoB,QAKzFE,EAA2BM,OAAOH,EAAkD,cAAzDG,CAA4D,MACvFL,EAAsB,SAA6BM,GACrD,IAAIC,EAAYF,OAAOH,EAA6C,SAApDG,GACZG,EAAQD,EAAU,GAClBE,EAAWF,EAAU,GAezB,OAbAF,OAAOH,EAA8C,UAArDG,EAAwD,WACtD,IAAIK,EAAQL,OAAOD,EAAiE,EAAxEC,CAA2E,SAEzE,KAAVK,GACFC,MAAM,GAAGC,OAAOT,EAA0D,EAAG,WAAWS,OAAOC,KAAKC,MAAMC,KAAKL,EAAMM,MAAM,KAAK,KAAKC,OAAOC,MAAK,SAAUC,GACzJ,OAAOA,EAAIC,UACVF,MAAK,SAAUG,GAChB,OAAOZ,EAASY,MACR,OAAE,SAAUC,GACpB,OAAOC,QAAQC,IAAIF,QAGtB,IACiBjB,OAAOJ,EAAoD,IAA3DI,CAA8DN,EAAY0B,SAAU,CACtGC,MAAO,CACLC,KAAMnB,EACNC,SAAUA,GAEZmB,SAAUtB,EAAMsB,aAMdC,KACA,SAAUlC,EAAQmC,EAASjC,IAG5BL,OAAOuC,SAAWvC,OAAOuC,UAAY,IAAItC,KAAK,CAC7C,SACA,WACE,OAAOI,EAAoB,YAO7BmC,KACA,SAAUrC,EAAQC,EAAqBC,GAE7C,aACqB,IAAII,EAAiDJ,EAAoB,QAErEoC,EAAgDpC,EAAoB,QACpEqC,EAAqErC,EAAoBsC,EAAEF,GAC3FG,EAAqCvC,EAAoB,QACzDwC,EAA0DxC,EAAoBsC,EAAEC,GAkD5ExC,EAAuB,EA5CjC,SAAsB0C,GACvC,IAAIC,EAAOD,EAAKC,KACZC,EAAUF,EAAKE,QACfC,EAAiBH,EAAKG,eACtBC,EAAUJ,EAAKI,QACfC,EAAQL,EAAKK,MACbC,EAAON,EAAKM,KAChB,OAAoBvC,OAAOJ,EAAqD,KAA5DI,CAA+DgC,EAA2CQ,EAAEC,SAAU,CACxIlB,SAAU,CAAcvB,OAAOJ,EAAqD,KAA5DI,CAA+D,MAAO,CAC5F0C,UAAWb,EAAsDW,EAAEG,QAAQ,CAAC,CAAC,aAAc,CAACL,OAAgBM,IAATL,EAAqB,WAAaA,MAA1HV,iBACXN,SAAU,CAAcvB,OAAOJ,EAAqD,KAA5DI,CAA+D,IAAK,CAC1F0C,UAAWb,EAAsDW,EAAEG,QAAQ,CAAC,CAAC,aAAc,CAACL,OAAgBM,IAATL,EAAqB,WAAaA,MAA1HV,gBACXN,SAAU,CAAC,iBAAkBW,KACdlC,OAAOJ,EAAoD,IAA3DI,CAA8D,SAAU,CACvF6C,QAAS,WACPV,GAAQ,SAAUW,GAChB,OAAOC,KAAKC,IAAIF,EAAM,EAAG,MAE3B3D,OAAO8D,SAAS,GAAI,MAEtBC,SAAmB,IAAThB,EACVQ,UAAWb,EAAsDW,EAAEG,QAAQ,CAAC,CAAC,aAAc,CAACL,OAAgBM,IAATL,EAAqB,WAAaA,MACrIhB,SAAU,kBACKvB,OAAOJ,EAAoD,IAA3DI,CAA8D,SAAU,CACvF6C,QAAS,YACFT,GAAkBC,IACrBF,GAAQ,SAAUW,GAChB,OAAOA,EAAM,KAEf3D,OAAO8D,SAAS,GAAI,OAGxBC,SAAUd,IAAmBC,EAC7BK,UAAWb,EAAsDW,EAAEG,QAAQ,CAAC,CAAC,aAAc,CAACL,OAAgBM,IAATL,EAAqB,WAAaA,MACrIhB,SAAU,iBAEGvB,OAAOJ,EAAoD,IAA3DI,CAA8D6B,EAAsDW,EAAG,CACtIW,GAAI,aACJR,QAAS,CAACL,OAAgBM,IAATL,EAAqB,WAAaA,GACnDhB,SAAU,CAAC,qDAAqDhB,OAAO+B,EAAO,kHAAkH/B,YAAgBqC,IAATL,EAAqB,WAAaA,EAAM,6BAA6BhC,YAAgBqC,IAATL,EAAqB,WAAaA,EAAM,mBAAmBhC,YAAgBqC,IAATL,EAAqB,WAAaA,EAAM,qBAAqBhC,YAAgBqC,IAATL,EAAqB,WAAaA,EAAM,MAAO,yFASxca,KACA,SAAU9D,EAAQC,EAAqBC,GAE7C,aACAA,EAAoB6D,EAAE9D,GACD,IAAI+D,EAA0D9D,EAAoB,QAC9E+D,EAA+E/D,EAAoBsC,EAAEwB,GACrGE,EAA2EhE,EAAoB,QAC/FiE,EAAiDjE,EAAoB,QAErEkE,EAAgDlE,EAAoB,QACpEmE,EAAqEnE,EAAoBsC,EAAE4B,GAC3FE,EAAqCpE,EAAoB,QACzDqE,EAA0DrE,EAAoBsC,EAAE8B,GAChFE,EAA2CtE,EAAoB,QAC/DuE,EAA2CvE,EAAoB,QAC/DwE,EAAwDxE,EAAoB,QAC5EyE,EAA2CzE,EAAoB,QAC/D0E,EAAoD1E,EAAoB,QACxE2E,EAAiD3E,EAAoB,QA8MjED,EAA6B,QAjM1C,WACd,IAAIW,EAAYF,OAAO4D,EAA6C,SAApD5D,CAAuD,GACnEkC,EAAOhC,EAAU,GACjBiC,EAAUjC,EAAU,GAEpBkE,EAAcpE,OAAO4D,EAA+C,WAAtD5D,CAAyDkE,EAAuE,GAC9IG,EAAcrE,OAAO8D,EAAiE,EAAxE9D,GACdsE,EAAUtE,OAAO4D,EAA2C,OAAlD5D,CAAqD,MAC/DuE,EAAiBvE,OAAO4D,EAA2C,OAAlD5D,CAAqD,MAEtEwE,EAA6B,WAC/B,IAAIvC,EAAOjC,OAAOwD,EAA0F,EAAjGxD,CAAkHuD,EAAgEf,EAAEiC,MAAK,SAASC,EAAQxC,GACnN,IAAIpB,EACJ,OAAOyC,EAAgEf,EAAEmC,MAAK,SAAkBC,GAC9F,OACE,OAAQA,EAASC,KAAOD,EAASE,MAC/B,KAAK,EAEH,OADAF,EAASE,KAAO,EACTxE,MAAM,GAAGC,OAAO0D,EAA0D,EAAG,mBAAmB1D,OAAO2B,EAAM,cAEtH,KAAK,EAGH,OAFApB,EAAM8D,EAASG,KACfH,EAASE,KAAO,EACThE,EAAIC,OAEb,KAAK,EACH,OAAO6D,EAASI,OAAO,SAAUJ,EAASG,MAE5C,KAAK,EACL,IAAK,MACH,OAAOH,EAASK,UAGrBP,OAGL,OAAO,SAAuBQ,GAC5B,OAAOjD,EAAKkD,MAAMC,KAAMC,YA3BK,GA+B7BC,EAAYtF,OAAO+D,EAA2D,EAAlE/D,CAAqE,CAAC,WAAYkC,IAAO,WACvG,OAAOsC,EAActC,KACpB,CACDqD,kBAAkB,IAEhBC,EAAYF,EAAUE,UACtBC,EAAUH,EAAUG,QACpBC,EAAQJ,EAAUI,MAClB1E,EAAOsE,EAAUtE,KACjBoB,EAAiBkD,EAAUlD,eA6B3BuD,EAA6B,WAC/B,IAAIC,EAAQ5F,OAAOwD,EAA0F,EAAjGxD,CAAkHuD,EAAgEf,EAAEiC,MAAK,SAASoB,EAASjF,GACrN,OAAO2C,EAAgEf,EAAEmC,MAAK,SAAmBmB,GAC/F,OACE,OAAQA,EAAUjB,KAAOiB,EAAUhB,MACjC,KAAK,EAEH,OADAgB,EAAUhB,KAAO,EACVxE,MAAM,GAAGC,OAAO0D,EAA0D,EAAG,cAAc1D,OAAOK,GAAO,CAC9GmF,OAAQ,SACRC,QAAS,CACPC,cAAe,UAAU1F,OAAOP,OAAOmE,EAAkE,EAAzEnE,CAA4E,aAIlH,KAAK,EAEH,OADA8F,EAAUhB,KAAO,EACVT,EAAY6B,cAAc,CAAC,WAAYhE,IAEhD,KAAK,EACL,IAAK,MACH,OAAO4D,EAAUb,UAGtBY,OAGL,OAAO,SAAuBM,GAC5B,OAAOP,EAAMT,MAAMC,KAAMC,YA3BI,GA+BjC,YAAyBzC,IAArBwB,EAAY9C,KACMtB,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,IAGvEA,OAAOyD,EAAqD,KAA5DzD,CAA+D6D,EAA2CrB,EAAEC,SAAU,CACxIlB,SAAU,CAA2B,QAA1B6C,EAAY9C,KAAK8E,KAA8BpG,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,CAC7H0C,UAAW,sCACXnB,SAAUiE,EAAyBxF,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,CACtG0C,UAAW,iBACXnB,SAAU,eACPkE,EAAuBzF,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,CAC/F0C,UAAW,iBACXnB,SAAUmE,EAAMW,UACArG,OAAOyD,EAAqD,KAA5DzD,CAA+D,MAAO,CACtF0C,UAAW,4BACXnB,SAAU,CAAcvB,OAAOyD,EAAqD,KAA5DzD,CAA+D,MAAO,CAC5F0C,UAAW,oCACXnB,SAAU,CAACP,EAAKsF,SAASC,KAAI,SAAUC,GACrC,OAAoBxG,OAAOyD,EAAqD,KAA5DzD,CAA+D,MAAO,CACxF0C,UAAW,iBACXnB,SAAU,CAAcvB,OAAOyD,EAAoD,IAA3DzD,CAA8D,IAAK,CACzF0C,UAAW,iBACXnB,SAAUiF,EAAQC,OACHzG,OAAOyD,EAAoD,IAA3DzD,CAA8D,IAAK,CAClF0G,KAAMF,EAAQG,KACdC,MAAO,CACLC,MAAO,SAETnE,UAAW,iBACXnB,SAAUiF,EAAQG,OACH3G,OAAOyD,EAAoD,IAA3DzD,CAA8D,SAAU,CACvF6C,QAAS,WACP,OAAO8C,EAAca,EAAQ5F,OAE/B8B,UAAW,iBACXnB,SAAU,iBAGCvB,OAAOyD,EAAoD,IAA3DzD,CAA8DgE,EAAuE,EAAG,CACvJ9B,KAAMA,EACNC,QAASA,EACTC,eAAgBA,EAChBC,QAASrB,EAAKqB,QACdC,MAAO,IACPC,KAAM,kBAEOvC,OAAOyD,EAAqD,KAA5DzD,CAA+D,OAAQ,CACtF8G,SAzGY,SAAuBC,GACzCA,EAAEC,iBAEE5C,EAAY9C,MACdhB,MAAM,GAAGC,OAAO0D,EAA0D,EAAG,gBAAiB,CAC5F8B,OAAQ,OACRC,QAAS,CACPiB,eAAgB,oBAElBC,KAAM1G,KAAK2G,UAAU,CACnBV,KAAMnC,EAAQ8C,QAAQ/F,MACtBgG,YAAa9C,EAAe6C,QAAQ/F,MACpCT,KAAMwD,EAAY9C,KAAKV,SAExBC,MAAK,SAAUC,GAChB,OAAOA,EAAIC,UACVF,MAAK,SAAUG,GACZA,EAAKsG,IACPpG,QAAQC,IAAIH,EAAKsG,MAEjBhD,EAAQ8C,QAAQ/F,MAAQ,GACxBkD,EAAe6C,QAAQ/F,MAAQ,QAqF/BqB,UAAW,iBACXnB,SAAU,CAAcvB,OAAOyD,EAAoD,IAA3DzD,CAA8D,QAAS,CAC7FuH,KAAM,OACNC,YAAa,SACbC,IAAKnD,EACLoD,UAAU,EACVhF,UAAW,mBACI1C,OAAOyD,EAAoD,IAA3DzD,CAA8D,WAAY,CACzF2H,KAAM,GACNC,KAAM,GACNJ,YAAa,gBACbC,IAAKlD,EACLmD,UAAU,EACVhF,UAAW,mBACI1C,OAAOyD,EAAoD,IAA3DzD,CAA8D,SAAU,CACvFuH,KAAM,SACN7E,UAAW,iBACXnB,SAAU,mBAIAvB,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,CACrF0C,UAAW,0BACXnB,SAAuBvB,OAAOyD,EAAoD,IAA3DzD,CAA8D,MAAO,CAC1F6H,IAAK,YACLC,IAAK,OACLpF,UAAW,qBAEE1C,OAAOyD,EAAoD,IAA3DzD,CAA8D2D,EAAsDnB,EAAG,CACtIW,GAAI,aACJ5B,SAAU,CAAC,+CAAgD,4EAA6E,+OAAgP,4HAS5X,CAAC,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE"},"name":"static/chunks/pages/admin-518fbfd8733cad83cffd.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[15],{\n\n/***/ \"L8ax\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return UserContext; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return UserContextProvider; });\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _utils_host__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"ZAWl\");\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"9rbA\");\n\n\n\n\nvar UserContext = /*#__PURE__*/Object(react__WEBPACK_IMPORTED_MODULE_1__[\"createContext\"])(null);\nvar UserContextProvider = function UserContextProvider(props) {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useState\"])(),\n      state = _useState[0],\n      setState = _useState[1];\n\n  Object(react__WEBPACK_IMPORTED_MODULE_1__[\"useEffect\"])(function () {\n    var token = Object(_utils_functions__WEBPACK_IMPORTED_MODULE_3__[/* getCookie */ \"a\"])(\"token\");\n\n    if (token !== \"\") {\n      fetch(\"\".concat(_utils_host__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], \"/users/\").concat(JSON.parse(atob(token.split(\".\")[1])).uuid)).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        return setState(data);\n      })[\"catch\"](function (err) {\n        return console.log(err);\n      });\n    }\n  }, []);\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(UserContext.Provider, {\n    value: {\n      user: state,\n      setState: setState\n    },\n    children: props.children\n  });\n};\n\n/***/ }),\n\n/***/ \"reNV\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/admin\",\n      function () {\n        return __webpack_require__(\"zP5P\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"uHeH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"MX0m\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\n\n\nvar PageHandlers = function PageHandlers(_ref) {\n  var page = _ref.page,\n      setPage = _ref.setPage,\n      isPreviousData = _ref.isPreviousData,\n      hasMore = _ref.hasMore,\n      width = _ref.width,\n      flex = _ref.flex;\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(react__WEBPACK_IMPORTED_MODULE_2___default.a.Fragment, {\n    children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"div\", {\n      className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default.a.dynamic([[\"2054357036\", [width, flex === undefined ? \"flex-end\" : flex]]]) + \" \" + \"page-handlers\",\n      children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsxs\"])(\"p\", {\n        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default.a.dynamic([[\"2054357036\", [width, flex === undefined ? \"flex-end\" : flex]]]) + \" \" + \"current-page\",\n        children: [\"Current Page: \", page]\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n        onClick: function onClick() {\n          setPage(function (old) {\n            return Math.max(old - 1, 0);\n          });\n          window.scrollTo(0, -500);\n        },\n        disabled: page === 1,\n        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default.a.dynamic([[\"2054357036\", [width, flex === undefined ? \"flex-end\" : flex]]]),\n        children: \"Previous Page\"\n      }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(\"button\", {\n        onClick: function onClick() {\n          if (!isPreviousData && hasMore) {\n            setPage(function (old) {\n              return old + 1;\n            });\n            window.scrollTo(0, -500);\n          }\n        },\n        disabled: isPreviousData || !hasMore,\n        className: styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default.a.dynamic([[\"2054357036\", [width, flex === undefined ? \"flex-end\" : flex]]]),\n        children: \"Next Page\"\n      })]\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default.a, {\n      id: \"2054357036\",\n      dynamic: [width, flex === undefined ? \"flex-end\" : flex],\n      children: [\".page-handlers.__jsx-style-dynamic-selector{width:\".concat(width, \"%;margin:20px auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:\").concat(flex === undefined ? \"flex-end\" : flex, \";-webkit-justify-content:\").concat(flex === undefined ? \"flex-end\" : flex, \";-ms-flex-pack:\").concat(flex === undefined ? \"flex-end\" : flex, \";justify-content:\").concat(flex === undefined ? \"flex-end\" : flex, \";}\"), \"button.__jsx-style-dynamic-selector{width:90px;margin:0 5px;font-size:0.6rem;}\"]\n    })]\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PageHandlers);\n\n/***/ }),\n\n/***/ \"zP5P\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"o0o1\");\n/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"HaE+\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"nKUr\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"MX0m\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"+QN0\");\n/* harmony import */ var react_query__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"Uvq/\");\n/* harmony import */ var _components_PageHandlers__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(\"uHeH\");\n/* harmony import */ var _utils_host__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(\"ZAWl\");\n/* harmony import */ var _context_UserContext__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(\"L8ax\");\n/* harmony import */ var _utils_functions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(\"9rbA\");\n\n\n\n\n\n\n\n\n\n\n\n\nvar AdminPage = function AdminPage() {\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useState\"])(1),\n      page = _useState[0],\n      setPage = _useState[1];\n\n  var userContext = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useContext\"])(_context_UserContext__WEBPACK_IMPORTED_MODULE_9__[/* UserContext */ \"a\"]);\n  var queryClient = Object(react_query__WEBPACK_IMPORTED_MODULE_5__[/* useQueryClient */ \"b\"])();\n  var nameRef = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useRef\"])(null);\n  var descriptionRef = Object(react__WEBPACK_IMPORTED_MODULE_4__[\"useRef\"])(null);\n\n  var fetchRequests = /*#__PURE__*/function () {\n    var _ref = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(page) {\n      var res;\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(_utils_host__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], \"/requests?page=\").concat(page, \"&limit=20\"));\n\n            case 2:\n              res = _context.sent;\n              _context.next = 5;\n              return res.json();\n\n            case 5:\n              return _context.abrupt(\"return\", _context.sent);\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchRequests(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useQuery = Object(react_query__WEBPACK_IMPORTED_MODULE_6__[/* useQuery */ \"a\"])([\"requests\", page], function () {\n    return fetchRequests(page);\n  }, {\n    keepPreviousData: true\n  }),\n      isLoading = _useQuery.isLoading,\n      isError = _useQuery.isError,\n      error = _useQuery.error,\n      data = _useQuery.data,\n      isPreviousData = _useQuery.isPreviousData;\n\n  var postCommunity = function postCommunity(e) {\n    e.preventDefault();\n\n    if (userContext.user) {\n      fetch(\"\".concat(_utils_host__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], \"/communities\"), {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          name: nameRef.current.value,\n          description: descriptionRef.current.value,\n          uuid: userContext.user.uuid\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (data) {\n        if (data.msg) {\n          console.log(data.msg);\n        } else {\n          nameRef.current.value = \"\";\n          descriptionRef.current.value = \"\";\n        }\n      });\n    }\n  };\n\n  var deleteRequest = /*#__PURE__*/function () {\n    var _ref2 = Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(uuid) {\n      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch(\"\".concat(_utils_host__WEBPACK_IMPORTED_MODULE_8__[/* default */ \"a\"], \"/requests/\").concat(uuid), {\n                method: \"DELETE\",\n                headers: {\n                  Authorization: \"Bearer \".concat(Object(_utils_functions__WEBPACK_IMPORTED_MODULE_10__[/* getCookie */ \"a\"])(\"token\"))\n                }\n              });\n\n            case 2:\n              _context2.next = 4;\n              return queryClient.prefetchQuery([\"requests\", page]);\n\n            case 4:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function deleteRequest(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  if (userContext.user === undefined) {\n    return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {});\n  }\n\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(react__WEBPACK_IMPORTED_MODULE_4___default.a.Fragment, {\n    children: [userContext.user.role === \"god\" ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n      className: \"jsx-2918500353\" + \" \" + \"admin-area-container\",\n      children: isLoading ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n        className: \"jsx-2918500353\",\n        children: \"Loading...\"\n      }) : isError ? /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n        className: \"jsx-2918500353\",\n        children: error.message\n      }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"div\", {\n        className: \"jsx-2918500353\" + \" \" + \"admin-area\",\n        children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"div\", {\n          className: \"jsx-2918500353\" + \" \" + \"requests-container\",\n          children: [data.requests.map(function (request) {\n            return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"div\", {\n              className: \"jsx-2918500353\",\n              children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"p\", {\n                className: \"jsx-2918500353\",\n                children: request.name\n              }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"a\", {\n                href: request.link,\n                style: {\n                  color: \"white\"\n                },\n                className: \"jsx-2918500353\",\n                children: request.link\n              }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"button\", {\n                onClick: function onClick() {\n                  return deleteRequest(request.uuid);\n                },\n                className: \"jsx-2918500353\",\n                children: \"Remove\"\n              })]\n            });\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(_components_PageHandlers__WEBPACK_IMPORTED_MODULE_7__[/* default */ \"a\"], {\n            page: page,\n            setPage: setPage,\n            isPreviousData: isPreviousData,\n            hasMore: data.hasMore,\n            width: 100,\n            flex: \"flex-start\"\n          })]\n        }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsxs\"])(\"form\", {\n          onSubmit: postCommunity,\n          className: \"jsx-2918500353\",\n          children: [/*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"input\", {\n            type: \"text\",\n            placeholder: \"Name: \",\n            ref: nameRef,\n            required: true,\n            className: \"jsx-2918500353\"\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"textarea\", {\n            cols: 30,\n            rows: 10,\n            placeholder: \"Description: \",\n            ref: descriptionRef,\n            required: true,\n            className: \"jsx-2918500353\"\n          }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"button\", {\n            type: \"submit\",\n            className: \"jsx-2918500353\",\n            children: \"Submit\"\n          })]\n        })]\n      })\n    }) : /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"div\", {\n      className: \"jsx-2918500353\" + \" \" + \"rickroll\",\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(\"img\", {\n        src: \"/rick.gif\",\n        alt: \"rick\",\n        className: \"jsx-2918500353\"\n      })\n    }), /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__[\"jsx\"])(styled_jsx_style__WEBPACK_IMPORTED_MODULE_3___default.a, {\n      id: \"2918500353\",\n      children: [\".rickroll.jsx-2918500353{margin:100px auto;}\", \".rickroll.jsx-2918500353 img.jsx-2918500353{display:block;margin:0 auto;}\", \".admin-area.jsx-2918500353{margin:200px 200px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}\", \"form.jsx-2918500353 input.jsx-2918500353,form.jsx-2918500353 textarea.jsx-2918500353{display:block;resize:none;}\"]\n    })]\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (AdminPage);\n\n/***/ })\n\n},[[\"reNV\",0,2,1,3,5]]]);"}